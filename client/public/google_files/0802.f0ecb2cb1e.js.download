__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({mapContextName:n,mapBounds:s,mapCenter:u,mapSize:l,queriedPoiAcpId:c,queriedPoiPlaceId:C,skip:I,poiCategoryTags:y,categoryTag:x,zoom:b,usingS2CellMapQuery:f=!1,onlyCacheInMapArea:P,isMobile:S}){const{mapSearchId:q,placeContextItems:M,stayContextItems:h,bookedStayContextItems:k}=(0,t.default)({isMobile:S,mapContextName:n,mapBounds:s,queriedPoiAcpId:c,queriedPoiPlaceId:C,skip:f||I,zoom:b,poiCategoryTags:y,categoryTag:x,onlyCacheInMapArea:P}),{mapSearchId:z,placeContextItems:A}=(0,o.default)({mapContextName:n,mapBounds:s,mapCenter:u,mapSize:l,queriedPoiAcpId:c,skip:!f||I,poiCategoryTags:y,zoom:b});return{mapSearchId:f?z:q,placeContextItems:f?A:M,stayContextItems:f?p:h,bookedStayContextItems:(f?p:k)||p}};var t=babelHelpers.interopRequireDefault(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1]));const p=[]}),"135615",["4f30fa","e04b36"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2LatLng=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]),h=r(d[3]);class l{constructor(t,n){this.latRadians=t,this.lngRadians=n}get latDegrees(){return new t.S1Angle(this.latRadians).degrees()}get lngDegrees(){return new t.S1Angle(this.lngRadians).degrees()}toPoint(){const t=this.latRadians,s=this.lngRadians,h=Math.cos(t);return new n.S2Point(Math.cos(s)*h,Math.sin(s)*h,Math.sin(t))}normalized(){return new l(Math.max(-s.S2.M_PI_2,Math.min(s.S2.M_PI_2,this.latRadians)),h.Platform.IEEEremainder(this.lngRadians,2*s.S2.M_PI))}static fromDegrees(n,s){return new l(t.S1Angle.degrees(n).radians,t.S1Angle.degrees(s).radians)}static fromRadians(t,n){return new l(t,n)}static fromPoint(t){return new l(l.latitude(t).radians,l.longitude(t).radians)}lat(){return t.S1Angle.radians(this.latRadians)}lng(){return t.S1Angle.radians(this.lngRadians)}isValid(){return Math.abs(this.latRadians)<=s.S2.M_PI_2&&Math.abs(this.lngRadians)<=s.S2.M_PI}mul(t){return new l(this.latRadians*t,this.lngRadians*t)}static latitude(n){return new t.S1Angle(Math.atan2(n.z,Math.sqrt(n.x*n.x+n.y*n.y)))}static longitude(n){return new t.S1Angle(Math.atan2(n.y,n.x))}equals(t){return t.latRadians===this.latRadians&&t.lngRadians===this.lngRadians}pointAtDistance(t,n){const s=1e3*t/l.EARTH_RADIUS_METERS,h=Math.asin(Math.sin(this.latRadians)*Math.cos(s)+Math.cos(this.latRadians)*Math.sin(s)*Math.cos(n)),o=this.lngRadians+Math.atan2(Math.sin(n)*Math.sin(s)*Math.cos(this.latRadians),Math.cos(s)-Math.sin(this.latRadians)*Math.sin(h));return new l(h,o)}pointsAtDistance(n,s=4){return[...new Array(s)].map((t,n)=>360/s*n).map(n=>t.S1Angle.degrees(n).radians).map(t=>this.pointAtDistance(n,t))}getEarthDistance(t){return this.getDistance(t).radians*l.EARTH_RADIUS_METERS}getDistance(n){const s=this.latRadians,h=n.latRadians,l=this.lngRadians,o=n.lngRadians,M=Math.sin(.5*(h-s)),R=Math.sin(.5*(o-l)),u=M*M+R*R*Math.cos(s)*Math.cos(h);return t.S1Angle.radians(2*Math.asin(Math.sqrt(Math.min(1,u))))}toString(){return"("+this.latRadians+", "+this.lngRadians+")"}toStringDegrees(){return"("+this.latDegrees+", "+this.lngDegrees+")"}toGEOJSON(){return{type:'Feature',geometry:{type:"Point",coordinates:[this.lngDegrees,this.latDegrees]},properties:{}}}}e.S2LatLng=l,l.EARTH_RADIUS_METERS=6367e3,l.CENTER=new l(0,0)}),"166121",["dafb27","6acac6","e90871","256d77"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=Object.prototype.hasOwnProperty;function n(t){if(!(this instanceof n))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof n||'function'==typeof Map&&t instanceof Map)t.forEach((function(t,n){this.set(n,t)}),this);else{if(!Array.isArray(t))throw new TypeError('invalid argument');t.forEach((function(t){this.set(t[0],t[1])}),this)}}function o(t,n){return t===n||t!=t&&n!=n}function s(t,n,o){this.key=t,this.value=n,this._index=o}function c(n,s){for(var c=0,u='_'+s,f=u;t.call(n,f);f=u+c++)if(o(n[f].key,s))return n[f]}m.exports=n,n.prototype.forEach=function(t,n){n=n||this,Object.keys(this._data).forEach((function(o){'size'!==o&&t.call(n,this._data[o].value,this._data[o].key)}),this)},n.prototype.has=function(t){return!!c(this._data,t)},n.prototype.get=function(t){var n=c(this._data,t);return n&&n.value},n.prototype.set=function(n,c){!(function(n,c,u){for(var f=0,p='_'+c,h=p;t.call(n,h);h=p+f++)if(o(n[h].key,c))return void(n[h].value=u);n.size++,n[h]=new s(c,u,h)})(this._data,n,c)},n.prototype.delete=function(t){var n=c(this._data,t);n&&(delete this._data[n._index],this._data.size--)},n.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,'_data',{value:t,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(n.prototype,'size',{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0}),n.prototype.values=n.prototype.keys=n.prototype.entries=function(){throw new Error('iterators are not implemented in this version')}}),"194f7a",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),"1a8948",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MutableInteger=void 0;e.MutableInteger=class{constructor(t){this.val=t}}}),"1d951c",[]);
__d((function(g,r,i,a,m,e,d){'use strict';m.exports=A;var t,n=r(d[0]),o=r(d[1]),s=r(d[2]),h=(t='function'==typeof Symbol&&'1'!==process.env._nodeLRUCacheForceNoSymbol?function(t){return Symbol(t)}:function(t){return'_'+t})('max'),u=t('length'),f=t('lengthCalculator'),l=t('allowStale'),p=t('maxAge'),c=t('dispose'),v=t('noDisposeOnSet'),y=t('lruList'),x=t('cache');function b(){return 1}function A(t){if(!(this instanceof A))return new A(t);'number'==typeof t&&(t={max:t}),t||(t={});var n=this[h]=t.max;(!n||'number'!=typeof n||n<=0)&&(this[h]=1/0);var o=t.length||b;'function'!=typeof o&&(o=b),this[f]=o,this[l]=t.stale||!1,this[p]=t.maxAge||0,this[c]=t.dispose,this[v]=t.noDisposeOnSet||!1,this.reset()}function k(t,n,o,s){var h=o.value;j(t,h)&&(S(t,o),t[l]||(h=void 0)),h&&n.call(s,h.value,h.key,t)}function w(t,n,o){var s=t[x].get(n);if(s){var h=s.value;j(t,h)?(S(t,s),t[l]||(h=void 0)):o&&t[y].unshiftNode(s),h&&(h=h.value)}return h}function j(t,n){if(!n||!n.maxAge&&!t[p])return!1;var o=Date.now()-n.now;return n.maxAge?o>n.maxAge:t[p]&&o>t[p]}function O(t){if(t[u]>t[h])for(var n=t[y].tail;t[u]>t[h]&&null!==n;){var o=n.prev;S(t,n),n=o}}function S(t,n){if(n){var o=n.value;t[c]&&t[c](o.key,o.value),t[u]-=o.length,t[x].delete(o.key),t[y].removeNode(n)}}function E(t,n,o,s,h){this.key=t,this.value=n,this.length=o,this.now=s,this.maxAge=h||0}Object.defineProperty(A.prototype,'max',{set:function(t){(!t||'number'!=typeof t||t<=0)&&(t=1/0),this[h]=t,O(this)},get:function(){return this[h]},enumerable:!0}),Object.defineProperty(A.prototype,'allowStale',{set:function(t){this[l]=!!t},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(A.prototype,'maxAge',{set:function(t){(!t||'number'!=typeof t||t<0)&&(t=0),this[p]=t,O(this)},get:function(){return this[p]},enumerable:!0}),Object.defineProperty(A.prototype,'lengthCalculator',{set:function(t){'function'!=typeof t&&(t=b),t!==this[f]&&(this[f]=t,this[u]=0,this[y].forEach((function(t){t.length=this[f](t.value,t.key),this[u]+=t.length}),this)),O(this)},get:function(){return this[f]},enumerable:!0}),Object.defineProperty(A.prototype,'length',{get:function(){return this[u]},enumerable:!0}),Object.defineProperty(A.prototype,'itemCount',{get:function(){return this[y].length},enumerable:!0}),A.prototype.rforEach=function(t,n){n=n||this;for(var o=this[y].tail;null!==o;){var s=o.prev;k(this,t,o,n),o=s}},A.prototype.forEach=function(t,n){n=n||this;for(var o=this[y].head;null!==o;){var s=o.next;k(this,t,o,n),o=s}},A.prototype.keys=function(){return this[y].toArray().map((function(t){return t.key}),this)},A.prototype.values=function(){return this[y].toArray().map((function(t){return t.value}),this)},A.prototype.reset=function(){this[c]&&this[y]&&this[y].length&&this[y].forEach((function(t){this[c](t.key,t.value)}),this),this[x]=new n,this[y]=new s,this[u]=0},A.prototype.dump=function(){return this[y].map((function(t){if(!j(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}}),this).toArray().filter((function(t){return t}))},A.prototype.dumpLru=function(){return this[y]},A.prototype.inspect=function(t,n){var s='LRUCache {',c=!1;this[l]&&(s+='\n  allowStale: true',c=!0);var v=this[h];v&&v!==1/0&&(c&&(s+=','),s+='\n  max: '+o.inspect(v,n),c=!0);var x=this[p];x&&(c&&(s+=','),s+='\n  maxAge: '+o.inspect(x,n),c=!0);var A=this[f];A&&A!==b&&(c&&(s+=','),s+='\n  length: '+o.inspect(this[u],n),c=!0);var k=!1;return this[y].forEach((function(t){k?s+=',\n  ':(c&&(s+=',\n'),k=!0,s+='\n  ');var h=o.inspect(t.key).split('\n').join('\n  '),u={value:t.value};t.maxAge!==x&&(u.maxAge=t.maxAge),A!==b&&(u.length=t.length),j(this,t)&&(u.stale=!0),u=o.inspect(u,n).split('\n').join('\n  '),s+=h+' => '+u})),(k||c)&&(s+='\n'),s+='}'},A.prototype.set=function(t,n,o){var s=(o=o||this[p])?Date.now():0,l=this[f](n,t);if(this[x].has(t)){if(l>this[h])return S(this,this[x].get(t)),!1;var b=this[x].get(t).value;return this[c]&&(this[v]||this[c](t,b.value)),b.now=s,b.maxAge=o,b.value=n,this[u]+=l-b.length,b.length=l,this.get(t),O(this),!0}var A=new E(t,n,l,s,o);return A.length>this[h]?(this[c]&&this[c](t,n),!1):(this[u]+=A.length,this[y].unshift(A),this[x].set(t,this[y].head),O(this),!0)},A.prototype.has=function(t){return!!this[x].has(t)&&!j(this,this[x].get(t).value)},A.prototype.get=function(t){return w(this,t,!0)},A.prototype.peek=function(t){return w(this,t,!1)},A.prototype.pop=function(){var t=this[y].tail;return t?(S(this,t),t.value):null},A.prototype.del=function(t){S(this,this[x].get(t))},A.prototype.load=function(t){this.reset();for(var n=Date.now(),o=t.length-1;o>=0;o--){var s=t[o],h=s.e||0;if(0===h)this.set(s.k,s.v);else{var u=h-n;u>0&&this.set(s.k,s.v,u)}}},A.prototype.prune=function(){var t=this;this[x].forEach((function(n,o){w(t,o,!1)}))}}),"1e44bb",["ef0f12","7ca195","72410d"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Platform=void 0;const t=r(d[0]);e.Platform=class{static IEEEremainder(t,N){return Number.isNaN(t)?t:Number.isNaN(N)?N:N!==Number.POSITIVE_INFINITY&&N!==Number.NEGATIVE_INFINITY||!Number.isFinite(t)?t-Math.round(t/N)*N:t}static getExponent(N){return t(N)}}}),"256d77",["cdca12"]);
__d((function(g,r,i,a,m,e,d){'use strict';var t;t=!0===r(d[0])?1:0,m.exports=t}),"2e854e",["aafc9a"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2Metric=void 0;const t=r(d[0]),n=r(d[1]);e.S2Metric=class{constructor(t,n){this._dim=t,this._deriv=n}deriv(){return this._deriv}dim(){return this._dim}getValue(t){return this.deriv()*Math.pow(2,-this.dim()*t)}getClosestLevel(t){return this.getMinLevel((1==this.dim()?n.S2.M_SQRT2:2)*t)}getMinLevel(s){if(s<=0)return n.S2.MAX_LEVEL;const h=t.Platform.getExponent(this.deriv()/s);return Math.max(0,Math.min(n.S2.MAX_LEVEL,-(h>>this.dim()-1)))}getMaxLevel(s){if(s<=0)return n.S2.MAX_LEVEL;const h=t.Platform.getExponent(this.deriv()/s);return Math.max(0,Math.min(n.S2.MAX_LEVEL,h>>this.dim()-1))}}}),"317001",["256d77","e90871"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2RegionCoverer=void 0;const t=r(d[0]),n=r(d[1]),l=r(d[2]),s=r(d[3]);class h{constructor(){this.minLevel=0,this.maxLevel=n.S2CellId.MAX_LEVEL,this.levelMod=1,this.maxCells=h.DEFAULT_MAX_CELLS,this.region=null,this.result=[],this.candidateQueue=new C}setMinLevel(t){return this.minLevel=Math.max(0,Math.min(n.S2CellId.MAX_LEVEL,t)),this}setMaxLevel(t){return this.maxLevel=Math.max(0,Math.min(n.S2CellId.MAX_LEVEL,t)),this}setLevelMod(t){return this.levelMod=Math.max(1,Math.min(3,t)),this}setMaxCells(t){return this.maxCells=t,this}getMinLevel(){return this.minLevel}getMaxLevel(){return this.maxLevel}getMaxCells(){return this.maxCells}getLevelMod(){return this.levelMod}getCoveringCells(t){return this.getCoveringUnion(t).denormalize(this.minLevel,this.levelMod)}getInteriorCoveringCells(t){return this.getInteriorCoveringUnion(t).denormalize(this.minLevel,this.levelMod)}getCoveringUnion(t,n=new l.S2CellUnion){return this.interiorCovering=!1,this.getCoveringInternal(t),n.initSwap(this.result),this.result=[],n}getInteriorCoveringUnion(t,n=new l.S2CellUnion){return this.interiorCovering=!0,this.getCoveringInternal(t),n.initSwap(this.result),this.result=[],n}static getSimpleCovering(t,l,s){return this.floodFill(t,n.S2CellId.fromPoint(l).parentL(s))}newCandidate(t){if(!this.region.mayIntersectC(t))return null;let n=!1;if(t.level>=this.minLevel)if(this.interiorCovering){if(this.region.containsC(t))n=!0;else if(t.level+this.levelMod>this.maxLevel)return null}else(t.level+this.levelMod>this.maxLevel||this.region.containsC(t))&&(n=!0);const l=new o;if(l.cell=t,l.isTerminal=n,l.numChildren=0,!n){l.children=[];const t=1<<this.maxChildrenShift();for(let n=0;n<t;n++)l.children.push(new o)}return this.candidatesCreatedCounter++,l}maxChildrenShift(){return 2*this.levelMod}addCandidate(t){if(null==t)return;if(t.isTerminal)return void this.result.push(t.cell.id);const n=t.cell.level<this.minLevel?1:this.levelMod,l=this.expandChildren(t,t.cell,n);if(0==t.numChildren);else if(!this.interiorCovering&&l==1<<this.maxChildrenShift()&&t.cell.level>=this.minLevel)t.isTerminal=!0,this.addCandidate(t);else{const n=-(((t.cell.level<<this.maxChildrenShift())+t.numChildren<<this.maxChildrenShift())+l);this.candidateQueue.add(new u(n,t))}}expandChildren(t,n,l){l--;const s=n.subdivide();let h=0;for(let n=0;n<4;++n){if(l>0){this.region.mayIntersectC(s[n])&&(h+=this.expandChildren(t,s[n],l));continue}const o=this.newCandidate(s[n]);null!=o&&(t.children[t.numChildren++]=o,o.isTerminal&&++h)}return h}getInitialCandidates(){if(this.maxCells>=4){const l=this.region.getCapBound();let h=Math.min(s.S2Projections.MIN_WIDTH.getMaxLevel(2*l.angle().radians),Math.min(this.maxLevel,n.S2CellId.MAX_LEVEL-1));if(this.levelMod>1&&h>this.minLevel&&(h-=(h-this.minLevel)%this.levelMod),h>0){const s=n.S2CellId.fromPoint(l.axis).getVertexNeighbors(h);for(let n=0;n<s.length;++n)this.addCandidate(this.newCandidate(new t.S2Cell(s[n])));return}}for(let t=0;t<6;++t)this.addCandidate(this.newCandidate(h.FACE_CELLS[t]))}getCoveringInternal(t){if(0!=this.candidateQueue.size()||0!=this.result.length)throw new Error('preconditions are not satisfied');for(this.region=t,this.candidatesCreatedCounter=0,this.getInitialCandidates();0!==this.candidateQueue.size()&&(!this.interiorCovering||this.result.length<this.maxCells);){const t=this.candidateQueue.poll().candidate;if(this.interiorCovering||t.cell.level<this.minLevel||1==t.numChildren||this.result.length+this.candidateQueue.size()+t.numChildren<=this.maxCells)for(let n=0;n<t.numChildren;++n)(!this.interiorCovering||this.result.length<this.maxCells)&&this.addCandidate(t.children[n]);else t.isTerminal=!0,this.addCandidate(t)}this.candidateQueue.clear(),this.region=null}static floodFill(n,l){const s=new Set,h=[],o=[];for(s.add(l.toToken()),h.push(l);0!==h.length;){const l=h.pop();if(!n.mayIntersectC(new t.S2Cell(l)))continue;o.push(l);const C=l.getEdgeNeighbors();for(let t=0;t<4;++t){const n=C[t];s.has(n.toToken())||(h.push(n),s.add(n.toToken()))}}return o}}e.S2RegionCoverer=h,h.DEFAULT_MAX_CELLS=8,h.FACE_CELLS=[0,1,2,3,4,5].map(n=>t.S2Cell.fromFace(n));class o{toString(){return`isTerminal: ${this.isTerminal} - Cell: ${this.cell.toString()}`}}class C{constructor(){this.clear()}add(t){this.items.push(t),this.items.sort((t,n)=>t.compare(n))}clear(){this.items=[]}size(){return this.items.length}poll(){return this.items.splice(0,1)[0]}}class u{constructor(t,n){this.id=t,this.candidate=n}compare(t){return this.id<t.id?1:this.id>t.id?-1:0}}}),"3f5faa",["ec227c","aa68f0","d6d466","c9b1c7"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Interval=void 0;e.Interval=class{constructor(t,o){this.lo=t,this.hi=o}toString(){return"["+this.lo.toString()+", "+this.hi.toString()+"]"}equals(t){return typeof t==typeof this&&(this.lo==t.lo&&this.hi==t.hi)}}}),"466476",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;class s extends Map{constructor(s){super(),this.maxSize=void 0,this.maxSize=s}get(s){if(super.has(s)){const t=super.get(s);return super.delete(s),t&&super.set(s,t),t}}set(s,t){if(this.size>=this.maxSize){const s=super.keys().next().value;super.delete(s)}return super.set(s,t)}}e.default=s}),"486497",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.R1Interval=void 0;const t=r(d[0]);class h extends t.Interval{isEmpty(){return this.lo>this.hi}getCenter(){return(this.lo+this.hi)/2}getLength(){return this.hi-this.lo}contains(t){return t>=this.lo&&t<=this.hi}interiorContains(t){return t>this.lo&&t<this.hi}containsI(t){return!!t.isEmpty()||t.lo>=this.lo&&t.hi<=this.hi}interiorContainsI(t){return!!t.isEmpty()||t.lo>this.lo&&t.hi<this.hi}intersects(t){return this.lo<=t.lo?t.lo<=this.hi&&t.lo<=t.hi:this.lo<=t.hi&&this.lo<=this.hi}interiorIntersects(t){return t.lo<this.hi&&this.lo<t.hi&&this.lo<this.hi&&t.lo<=t.hi}addPoint(t){return this.isEmpty()?h.fromPoint(t):t<this.lo?new h(t,this.hi):t>this.hi?new h(this.lo,t):new h(this.lo,this.hi)}expanded(t){return this.isEmpty()?this:new h(this.lo-t,this.hi+t)}union(t){return this.isEmpty()?t:t.isEmpty()?this:new h(Math.min(this.lo,t.lo),Math.max(this.hi,t.hi))}intersection(t){return new h(Math.max(this.lo,t.lo),Math.min(this.hi,t.hi))}approxEquals(t,h=1e-15){return this.isEmpty()?t.getLength()<=h:t.isEmpty()?this.getLength()<=h:Math.abs(t.lo-this.lo)+Math.abs(t.hi-this.hi)<=h}static empty(){return new h(1,0)}static fromPoint(t){return new h(t,t)}static fromPointPair(t,s){return t<=s?new h(t,s):new h(s,t)}}e.R1Interval=h}),"4aaf2d",["466476"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({cacheStorageKey:l,priorityCachedKey:f,enabled:h=!0,extractKey:p,items:y=o,maxCacheSize:_=50,validationKey:b}){const C=(0,s.default)(y),v=(0,s.default)(b),S=(0,t.useRef)(!1);null!=v&&v!==b&&(S.current=!0);const[A,K]=(0,t.useState)(()=>[new n.default(_)]),O=A[0];(0,t.useEffect)(()=>{let t=!1;try{!(async function(){const n=await(0,c.getFromCache)("search_map_cache_pins",l);if(n){const c=JSON.parse(n);!t&&Array.isArray(c)&&(u(O,c.map(t=>t[1]),p),K([O]))}})()}catch(t){}return()=>{t=!0;const n=JSON.stringify(Array.from(O.entries()));try{(0,c.storeInCache)("search_map_cache_pins",l,n)}catch(t){}}},[O,l,p]);const R=(0,t.useRef)(f);R.current=f;const x=(0,t.useMemo)(()=>{const t=A[0];return h||t.clear(),C!==y&&S.current&&(t.clear(),S.current=!1),h&&C!==y&&(R.current&&t.get(R.current),((t,c=[],n)=>{const s=c.slice().reverse();u(t,s,n)})(t,y,p),R.current&&t.get(R.current)),Array.from(t.values()).reverse()},[A,h,C,y,R,p]),N=(0,t.useCallback)(t=>{O.get(t)},[O]),k=(0,t.useCallback)(()=>{S.current=!0},[]);return{itemsWithCache:h?x:y,refreshCacheItem:N,purgeOnNextUpdate:k}};var t=r(d[0]),c=r(d[1]),n=babelHelpers.interopRequireDefault(r(d[2])),s=babelHelpers.interopRequireDefault(r(d[3]));const u=(t,c=[],n)=>{c.forEach(c=>{const s=n(c);s&&(t.get(s),t.set(s,c))})},o=[]}),"4bda54",["d7ed8e","acd9f0","486497","71657b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({onlyCacheInMapArea:h=!0,isNewMapAreaSearch:y=!0,isMobile:S,mapBounds:b,mapContextName:O,queriedPoiAcpId:_,queriedPoiPlaceId:f,setInitPoiLimit:E=!0,skip:K=!1,zoom:v,maxStays:q,maxExperiences:L,poiCategoryTags:R,categoryTag:z}){var A,U,M,T;const{initPOI:k,maxPOI:B}=(function(t,n,l){switch(n){case'EXPERIENCES_PDP':case'HOMES_PDP':case'PLACES_PDP':return l?t?I:P:t?c:P;case'RESERVATION_DETAILS':return C;case'EXPERIENCES_SEARCH_RESULTS':case'HOMES_SEARCH_RESULTS':return l?t?x:p:t?u:p;default:return c}})(S,O),{stayContextItems:D,placeContextItems:F,experienceContextItems:H,mapSearchId:N,loading:W}=(0,l.default)({mapContextName:O,ne_lat:(null==b||null===(A=b.ne)||void 0===A?void 0:A.lat)||0,ne_lng:(null==b||null===(U=b.ne)||void 0===U?void 0:U.lng)||0,queriedPoiAcpId:_,queriedPoiPlaceId:f,selectTopNPois:E?k:void 0,skip:void 0===b||void 0===v||K,sw_lat:(null==b||null===(M=b.sw)||void 0===M?void 0:M.lat)||0,sw_lng:(null==b||null===(T=b.sw)||void 0===T?void 0:T.lng)||0,zoom:v,poiCategoryTags:R}),w=(0,t.useCallback)(t=>({lat:t.lat,lng:t.lng}),[]),X=(0,t.useMemo)(()=>D.filter(t=>!t.isBooked),[D]),j=(0,t.useMemo)(()=>D.filter(t=>t.isBooked),[D]),{itemsWithCache:V}=(0,o.default)({items:X,enabled:y,mapBounds:b,maxCacheSize:q,extractKey:n.buildUniqueKeyFromItem,extractLatLng:w}),{itemsWithCache:G}=(0,o.default)({items:j,enabled:y,mapBounds:b,maxCacheSize:q,extractKey:n.buildUniqueKeyFromItem,extractLatLng:w}),{itemsWithCache:J}=(0,s.default)({enabled:y,cacheStorageKey:'booked_stay_items',items:j,extractKey:n.buildUniqueKeyFromItem,maxCacheSize:q}),{itemsWithCache:Q}=(0,o.default)({enabled:y,items:F,mapBounds:b,maxCacheSize:B,extractKey:n.buildUniqueKeyFromItem,extractLatLng:w,validationKey:z}),{itemsWithCache:Y}=(0,s.default)({enabled:y,cacheStorageKey:'place_items',items:F,extractKey:n.buildUniqueKeyFromItem,maxCacheSize:B,validationKey:z}),{itemsWithCache:Z}=(0,o.default)({enabled:y,items:H,mapBounds:b,maxCacheSize:L,extractKey:n.buildUniqueKeyFromItem,extractLatLng:w}),{itemsWithCache:$}=(0,s.default)({enabled:y,cacheStorageKey:'experience_items',items:H,extractKey:n.buildUniqueKeyFromItem,maxCacheSize:L});return{loading:W,mapSearchId:N,bookedStayContextItems:h?G:J,stayContextItems:h?V:X,placeContextItems:h?Q:Y,experienceContextItems:h?Z:$}};var t=r(d[0]),n=r(d[1]),l=babelHelpers.interopRequireDefault(r(d[2])),o=babelHelpers.interopRequireDefault(r(d[3])),s=babelHelpers.interopRequireDefault(r(d[4]));const c={maxPOI:10,initPOI:4},u={maxPOI:10,initPOI:4},I={maxPOI:25,initPOI:4},x={maxPOI:25,initPOI:4},P={maxPOI:25,initPOI:10},p={maxPOI:25,initPOI:10},C={maxPOI:45,initPOI:20}}),"4f30fa",["d7ed8e","7f44bd","e6cc5e","a442d8","4bda54"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2Point=void 0;const t=r(d[0]);class s{constructor(t,s,h){this.x=t,this.y=s,this.z=h}static minus(t,h){return s.sub(t,h)}static neg(t){return new s(-1*t.x,-1*t.y,-1*t.z)}norm2(){return Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2)}norm(){return Math.sqrt(this.norm2())}static crossProd(t,h){return new s(t.y*h.z-t.z*h.y,t.z*h.x-t.x*h.z,t.x*h.y-t.y*h.x)}static add(t,h){return new s(t.x+h.x,t.y+h.y,t.z+h.z)}static sub(t,h){return new s(t.x-h.x,t.y-h.y,t.z-h.z)}dotProd(t){return this.x*t.x+this.y*t.y+this.z*t.z}static mul(t,h){return new s(h*t.x,h*t.y,h*t.z)}static div(t,h){return new s(t.x/h,t.y/h,t.z/h)}getDistance(t){return Math.sqrt(this.getDistance2(t))}getDistance2(t){const s=this.x-t.x,h=this.y-t.y,n=this.z-t.z;return s*s+h*h+n*n}ortho(){const t=this.largestAbsComponent();let h;return h=1==t?new s(1,0,0):2==t?new s(0,1,0):new s(0,0,1),s.normalize(s.crossProd(this,h))}largestAbsComponent(){return s.largestAbsComponent(this.x,this.y,this.z)}static largestAbsComponent(t,s,h){const n=Math.abs(t),o=Math.abs(s),u=Math.abs(h);return n>o?n>u?0:2:o>u?1:2}get(t){return 0==t?this.x:1==t?this.y:this.z}static fabs(t){return new s(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z))}static normalize(t){let h=t.norm();return 0!=h&&(h=1/h),s.mul(t,h)}axis(t){return 0==t?this.x:1==t?this.y:this.z}angle(t){return Math.atan2(s.crossProd(this,t).norm(),this.dotProd(t))}aequal(t,s){return this.x-Math.abs(t.x)<s&&this.y-Math.abs(t.y)<s&&this.z-Math.abs(t.z)<s}equals(t){return t instanceof s&&(this.x==t.x&&this.y==t.y&&this.z==t.z)}lessThan(t){return this.x<t.x||!(t.x<this.x)&&(this.y<t.y||!(t.y<this.y)&&this.z<t.z)}compareTo(t){return this.lessThan(t)?-1:this.equals(t)?0:1}toFace(){let t=this.largestAbsComponent();return this.axis(t)<0&&(t+=3),t}toR2Vector(s=this.toFace()){let h,n;switch(s){case 0:h=this.y/this.x,n=this.z/this.x;break;case 1:h=-1*this.x/this.y,n=this.z/this.y;break;case 2:h=-1*this.x/this.z,n=-1*this.y/this.z;break;case 3:h=this.z/this.x,n=this.y/this.x;break;case 4:h=this.z/this.y,n=-1*this.x/this.y;break;case 5:h=-1*this.y/this.z,n=-1*this.x/this.z;break;default:throw new Error('Invalid face')}return new t.R2Vector(h,n)}toString(){return`Point(${this.x}, ${this.y}, ${this.z})`}}e.S2Point=s,s.ORIGIN=new s(0,0,0),s.X_POS=new s(1,0,0),s.X_NEG=new s(-1,0,0),s.Y_POS=new s(0,1,0),s.Y_NEG=new s(0,-1,0),s.Z_POS=new s(0,0,1),s.Z_NEG=new s(0,0,-1)}),"6acac6",["f1ee27"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(n){var h=this;if(h instanceof t||(h=new t),h.tail=null,h.head=null,h.length=0,n&&'function'==typeof n.forEach)n.forEach((function(t){h.push(t)}));else if(arguments.length>0)for(var l=0,s=arguments.length;l<s;l++)h.push(arguments[l]);return h}function n(t,n){t.tail=new l(n,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function h(t,n){t.head=new l(n,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function l(t,n,h,s){if(!(this instanceof l))return new l(t,n,h,s);this.list=s,this.value=t,n?(n.next=this,this.prev=n):this.prev=null,h?(h.prev=this,this.next=h):this.next=null}m.exports=t,t.Node=l,t.create=t,t.prototype.removeNode=function(t){if(t.list!==this)throw new Error('removing node which does not belong to this list');var n=t.next,h=t.prev;n&&(n.prev=h),h&&(h.next=n),t===this.head&&(this.head=n),t===this.tail&&(this.tail=h),t.list.length--,t.next=null,t.prev=null,t.list=null},t.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var n=this.head;t.list=this,t.next=n,n&&(n.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},t.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var n=this.tail;t.list=this,t.prev=n,n&&(n.next=t),this.tail=t,this.head||(this.head=t),this.length++}},t.prototype.push=function(){for(var t=0,h=arguments.length;t<h;t++)n(this,arguments[t]);return this.length},t.prototype.unshift=function(){for(var t=0,n=arguments.length;t<n;t++)h(this,arguments[t]);return this.length},t.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},t.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},t.prototype.forEach=function(t,n){n=n||this;for(var h=this.head,l=0;null!==h;l++)t.call(n,h.value,l,this),h=h.next},t.prototype.forEachReverse=function(t,n){n=n||this;for(var h=this.tail,l=this.length-1;null!==h;l--)t.call(n,h.value,l,this),h=h.prev},t.prototype.get=function(t){for(var n=0,h=this.head;null!==h&&n<t;n++)h=h.next;if(n===t&&null!==h)return h.value},t.prototype.getReverse=function(t){for(var n=0,h=this.tail;null!==h&&n<t;n++)h=h.prev;if(n===t&&null!==h)return h.value},t.prototype.map=function(n,h){h=h||this;for(var l=new t,s=this.head;null!==s;)l.push(n.call(h,s.value,this)),s=s.next;return l},t.prototype.mapReverse=function(n,h){h=h||this;for(var l=new t,s=this.tail;null!==s;)l.push(n.call(h,s.value,this)),s=s.prev;return l},t.prototype.reduce=function(t,n){var h,l=this.head;if(arguments.length>1)h=n;else{if(!this.head)throw new TypeError('Reduce of empty list with no initial value');l=this.head.next,h=this.head.value}for(var s=0;null!==l;s++)h=t(h,l.value,s),l=l.next;return h},t.prototype.reduceReverse=function(t,n){var h,l=this.tail;if(arguments.length>1)h=n;else{if(!this.tail)throw new TypeError('Reduce of empty list with no initial value');l=this.tail.prev,h=this.tail.value}for(var s=this.length-1;null!==l;s--)h=t(h,l.value,s),l=l.prev;return h},t.prototype.toArray=function(){for(var t=new Array(this.length),n=0,h=this.head;null!==h;n++)t[n]=h.value,h=h.next;return t},t.prototype.toArrayReverse=function(){for(var t=new Array(this.length),n=0,h=this.tail;null!==h;n++)t[n]=h.value,h=h.prev;return t},t.prototype.slice=function(n,h){(h=h||this.length)<0&&(h+=this.length),(n=n||0)<0&&(n+=this.length);var l=new t;if(h<n||h<0)return l;n<0&&(n=0),h>this.length&&(h=this.length);for(var s=0,o=this.head;null!==o&&s<n;s++)o=o.next;for(;null!==o&&s<h;s++,o=o.next)l.push(o.value);return l},t.prototype.sliceReverse=function(n,h){(h=h||this.length)<0&&(h+=this.length),(n=n||0)<0&&(n+=this.length);var l=new t;if(h<n||h<0)return l;n<0&&(n=0),h>this.length&&(h=this.length);for(var s=this.length,o=this.tail;null!==o&&s>h;s--)o=o.prev;for(;null!==o&&s>n;s--,o=o.prev)l.push(o.value);return l},t.prototype.reverse=function(){for(var t=this.head,n=this.tail,h=t;null!==h;h=h.prev){var l=h.prev;h.prev=h.next,h.next=l}return this.head=n,this.tail=t,this}}),"72410d",[]);
__d((function(g,r,i,a,m,e,d){"use strict";m.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,n,h){this.low=0|t,this.high=0|n,this.unsigned=!!h}function h(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=h;var s={},u={};function o(t,n){var h,o,f;return n?(f=0<=(t>>>=0)&&t<256)&&(o=u[t])?o:(h=l(t,(0|t)<0?-1:0,!0),f&&(u[t]=h),h):(f=-128<=(t|=0)&&t<128)&&(o=s[t])?o:(h=l(t,t<0?-1:0,!1),f&&(s[t]=h),h)}function f(t,n){if(isNaN(t))return n?_:q;if(n){if(t<0)return _;if(t>=E)return I}else{if(t<=-y)return U;if(t+1>=y)return O}return t<0?f(-t,n).neg():l(t%N|0,t/N|0,n)}function l(t,h,s){return new n(t,h,s)}n.fromInt=o,n.fromNumber=f,n.fromBits=l;var c=Math.pow;function w(t,n,h){if(0===t.length)throw Error('empty string');if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return q;if('number'==typeof n?(h=n,n=!1):n=!!n,(h=h||10)<2||36<h)throw RangeError('radix');var s;if((s=t.indexOf('-'))>0)throw Error('interior hyphen');if(0===s)return w(t.substring(1),n,h).neg();for(var u=f(c(h,8)),o=q,l=0;l<t.length;l+=8){var v=Math.min(8,t.length-l),N=parseInt(t.substring(l,l+v),h);if(v<8){var E=f(c(h,v));o=o.mul(E).add(f(N))}else o=(o=o.mul(u)).add(f(N))}return o.unsigned=n,o}function v(t,n){return'number'==typeof t?f(t,n):'string'==typeof t?w(t,n):l(t.low,t.high,'boolean'==typeof n?n:t.unsigned)}n.fromString=w,n.fromValue=v;var N=4294967296,E=0x10000000000000000,y=0x8000000000000000,b=o(16777216),q=o(0);n.ZERO=q;var _=o(0,!0);n.UZERO=_;var p=o(1);n.ONE=p;var B=o(1,!0);n.UONE=B;var L=o(-1);n.NEG_ONE=L;var O=l(-1,2147483647,!1);n.MAX_VALUE=O;var I=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=I;var U=l(0,-2147483648,!1);n.MIN_VALUE=U;var M=n.prototype;M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*N+(this.low>>>0):this.high*N+(this.low>>>0)},M.toString=function(t){if((t=t||10)<2||36<t)throw RangeError('radix');if(this.isZero())return'0';if(this.isNegative()){if(this.eq(U)){var n=f(t),h=this.div(n),s=h.mul(n).sub(this);return h.toString(t)+s.toInt().toString(t)}return'-'+this.neg().toString(t)}for(var u=f(c(t,6),this.unsigned),o=this,l='';;){var w=o.div(u),v=(o.sub(w.mul(u)).toInt()>>>0).toString(t);if((o=w).isZero())return v+l;for(;v.length<6;)v='0'+v;l=''+v+l}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(U)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},M.isZero=function(){return 0===this.high&&0===this.low},M.eqz=M.isZero,M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return 1==(1&this.low)},M.isEven=function(){return 0==(1&this.low)},M.equals=function(t){return h(t)||(t=v(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},M.eq=M.equals,M.notEquals=function(t){return!this.eq(t)},M.neq=M.notEquals,M.ne=M.notEquals,M.lessThan=function(t){return this.comp(t)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(t){return this.comp(t)<=0},M.lte=M.lessThanOrEqual,M.le=M.lessThanOrEqual,M.greaterThan=function(t){return this.comp(t)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(t){return this.comp(t)>=0},M.gte=M.greaterThanOrEqual,M.ge=M.greaterThanOrEqual,M.compare=function(t){if(h(t)||(t=v(t)),this.eq(t))return 0;var n=this.isNegative(),s=t.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(U)?U:this.not().add(p)},M.neg=M.negate,M.add=function(t){h(t)||(t=v(t));var n=this.high>>>16,s=65535&this.high,u=this.low>>>16,o=65535&this.low,f=t.high>>>16,c=65535&t.high,w=t.low>>>16,N=0,E=0,y=0,b=0;return y+=(b+=o+(65535&t.low))>>>16,E+=(y+=u+w)>>>16,N+=(E+=s+c)>>>16,N+=n+f,l((y&=65535)<<16|(b&=65535),(N&=65535)<<16|(E&=65535),this.unsigned)},M.subtract=function(t){return h(t)||(t=v(t)),this.add(t.neg())},M.sub=M.subtract,M.multiply=function(n){if(this.isZero())return q;if(h(n)||(n=v(n)),t)return l(t.mul(this.low,this.high,n.low,n.high),t.get_high(),this.unsigned);if(n.isZero())return q;if(this.eq(U))return n.isOdd()?U:q;if(n.eq(U))return this.isOdd()?U:q;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(b)&&n.lt(b))return f(this.toNumber()*n.toNumber(),this.unsigned);var s=this.high>>>16,u=65535&this.high,o=this.low>>>16,c=65535&this.low,w=n.high>>>16,N=65535&n.high,E=n.low>>>16,y=65535&n.low,_=0,p=0,B=0,L=0;return B+=(L+=c*y)>>>16,p+=(B+=o*y)>>>16,B&=65535,p+=(B+=c*E)>>>16,_+=(p+=u*y)>>>16,p&=65535,_+=(p+=o*E)>>>16,p&=65535,_+=(p+=c*N)>>>16,_+=s*y+u*E+o*N+c*w,l((B&=65535)<<16|(L&=65535),(_&=65535)<<16|(p&=65535),this.unsigned)},M.mul=M.multiply,M.divide=function(n){if(h(n)||(n=v(n)),n.isZero())throw Error('division by zero');var s,u,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==n.low||-1!==n.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,n.low,n.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:q;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return _;if(n.gt(this.shru(1)))return B;o=_}else{if(this.eq(U))return n.eq(p)||n.eq(L)?U:n.eq(U)?p:(s=this.shr(1).div(n).shl(1)).eq(q)?n.isNegative()?p:L:(u=this.sub(n.mul(s)),o=s.add(u.div(n)));if(n.eq(U))return this.unsigned?_:q;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();o=q}for(u=this;u.gte(n);){s=Math.max(1,Math.floor(u.toNumber()/n.toNumber()));for(var w=Math.ceil(Math.log(s)/Math.LN2),N=w<=48?1:c(2,w-48),E=f(s),y=E.mul(n);y.isNegative()||y.gt(u);)y=(E=f(s-=N,this.unsigned)).mul(n);E.isZero()&&(E=p),o=o.add(E),u=u.sub(y)}return o},M.div=M.divide,M.modulo=function(n){return h(n)||(n=v(n)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,n.low,n.high),t.get_high(),this.unsigned):this.sub(this.div(n).mul(n))},M.mod=M.modulo,M.rem=M.modulo,M.not=function(){return l(~this.low,~this.high,this.unsigned)},M.and=function(t){return h(t)||(t=v(t)),l(this.low&t.low,this.high&t.high,this.unsigned)},M.or=function(t){return h(t)||(t=v(t)),l(this.low|t.low,this.high|t.high,this.unsigned)},M.xor=function(t){return h(t)||(t=v(t)),l(this.low^t.low,this.high^t.high,this.unsigned)},M.shiftLeft=function(t){return h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?l(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):l(0,this.low<<t-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(t){return h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?l(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):l(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(t){if(h(t)&&(t=t.toInt()),0===(t&=63))return this;var n=this.high;return t<32?l(this.low>>>t|n<<32-t,n>>>t,this.unsigned):l(32===t?n:n>>>t-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.shr_u=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},M.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var t=this.high,n=this.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},M.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]},n.fromBytes=function(t,h,s){return s?n.fromBytesLE(t,h):n.fromBytesBE(t,h)},n.fromBytesLE=function(t,h){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,h)},n.fromBytesBE=function(t,h){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],h)}}),"754175",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=Object.getOwnPropertyDescriptors||function(t){for(var n=Object.keys(t),o={},u=0;u<n.length;u++)o[n[u]]=Object.getOwnPropertyDescriptor(t,n[u]);return o},n=/%[sdj%]/g;e.format=function(t){if(!j(t)){for(var o=[],u=0;u<arguments.length;u++)o.push(c(arguments[u]));return o.join(' ')}u=1;for(var s=arguments,f=s.length,l=String(t).replace(n,(function(t){if('%%'===t)return'%';if(u>=f)return t;switch(t){case'%s':return String(s[u++]);case'%d':return Number(s[u++]);case'%j':try{return JSON.stringify(s[u++])}catch(t){return'[Circular]'}default:return t}})),p=s[u];u<f;p=s[++u])v(p)||!z(p)?l+=' '+p:l+=' '+c(p);return l},e.deprecate=function(t,n){if('undefined'!=typeof process&&!0===process.noDeprecation)return t;if('undefined'==typeof process)return function(){return e.deprecate(t,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),o=!0}return t.apply(this,arguments)}};var o,u={};function c(t,n){var o={seen:[],stylize:f};return arguments.length>=3&&(o.depth=arguments[2]),arguments.length>=4&&(o.colors=arguments[3]),h(n)?o.showHidden=n:n&&e._extend(o,n),w(o.showHidden)&&(o.showHidden=!1),w(o.depth)&&(o.depth=2),w(o.colors)&&(o.colors=!1),w(o.customInspect)&&(o.customInspect=!0),o.colors&&(o.stylize=s),l(o,t,o.depth)}function s(t,n){var o=c.styles[n];return o?'\x1b['+c.colors[o][0]+'m'+t+'\x1b['+c.colors[o][1]+'m':t}function f(t,n){return t}function l(t,n,o){if(t.customInspect&&n&&P(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var u=n.inspect(o,t);return j(u)||(u=l(t,u,o)),u}var c=(function(t,n){if(w(n))return t.stylize('undefined','undefined');if(j(n)){var o='\''+JSON.stringify(n).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+'\'';return t.stylize(o,'string')}if(O(n))return t.stylize(''+n,'number');if(h(n))return t.stylize(''+n,'boolean');if(v(n))return t.stylize('null','null')})(t,n);if(c)return c;var s=Object.keys(n),f=(function(t){var n={};return t.forEach((function(t,o){n[t]=!0})),n})(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),x(n)&&(s.indexOf('message')>=0||s.indexOf('description')>=0))return p(n);if(0===s.length){if(P(n)){var z=n.name?': '+n.name:'';return t.stylize('[Function'+z+']','special')}if(S(n))return t.stylize(RegExp.prototype.toString.call(n),'regexp');if(E(n))return t.stylize(Date.prototype.toString.call(n),'date');if(x(n))return p(n)}var D,T='',N=!1,F=['{','}'];(b(n)&&(N=!0,F=['[',']']),P(n))&&(T=' [Function'+(n.name?': '+n.name:'')+']');return S(n)&&(T=' '+RegExp.prototype.toString.call(n)),E(n)&&(T=' '+Date.prototype.toUTCString.call(n)),x(n)&&(T=' '+p(n)),0!==s.length||N&&0!=n.length?o<0?S(n)?t.stylize(RegExp.prototype.toString.call(n),'regexp'):t.stylize('[Object]','special'):(t.seen.push(n),D=N?(function(t,n,o,u,c){for(var s=[],f=0,l=n.length;f<l;++f)k(n,String(f))?s.push(y(t,n,o,u,String(f),!0)):s.push('');return c.forEach((function(c){c.match(/^\d+$/)||s.push(y(t,n,o,u,c,!0))})),s})(t,n,o,f,s):s.map((function(u){return y(t,n,o,f,u,N)})),t.seen.pop(),(function(t,n,o){if(t.reduce((function(t,n){return n.indexOf('\n')>=0&&0,t+n.replace(/\u001b\[\d\d?m/g,'').length+1}),0)>60)return o[0]+(''===n?'':n+'\n ')+' '+t.join(',\n  ')+' '+o[1];return o[0]+n+' '+t.join(', ')+' '+o[1]})(D,T,F)):F[0]+T+F[1]}function p(t){return'['+Error.prototype.toString.call(t)+']'}function y(t,n,o,u,c,s){var f,p,y;if((y=Object.getOwnPropertyDescriptor(n,c)||{value:n[c]}).get?p=y.set?t.stylize('[Getter/Setter]','special'):t.stylize('[Getter]','special'):y.set&&(p=t.stylize('[Setter]','special')),k(u,c)||(f='['+c+']'),p||(t.seen.indexOf(y.value)<0?(p=v(o)?l(t,y.value,null):l(t,y.value,o-1)).indexOf('\n')>-1&&(p=s?p.split('\n').map((function(t){return'  '+t})).join('\n').substr(2):'\n'+p.split('\n').map((function(t){return'   '+t})).join('\n')):p=t.stylize('[Circular]','special')),w(f)){if(s&&c.match(/^\d+$/))return p;(f=JSON.stringify(''+c)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=t.stylize(f,'name')):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=t.stylize(f,'string'))}return f+': '+p}function b(t){return Array.isArray(t)}function h(t){return'boolean'==typeof t}function v(t){return null===t}function O(t){return'number'==typeof t}function j(t){return'string'==typeof t}function w(t){return void 0===t}function S(t){return z(t)&&'[object RegExp]'===D(t)}function z(t){return'object'==typeof t&&null!==t}function E(t){return z(t)&&'[object Date]'===D(t)}function x(t){return z(t)&&('[object Error]'===D(t)||t instanceof Error)}function P(t){return'function'==typeof t}function D(t){return Object.prototype.toString.call(t)}function T(t){return t<10?'0'+t.toString(10):t.toString(10)}e.debuglog=function(t){if(w(o)&&(o=process.env.NODE_DEBUG||''),t=t.toUpperCase(),!u[t])if(new RegExp('\\b'+t+'\\b','i').test(o)){var n=process.pid;u[t]=function(){var o=e.format.apply(e,arguments);console.error('%s %d: %s',t,n,o)}}else u[t]=function(){};return u[t]},e.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},e.isArray=b,e.isBoolean=h,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=O,e.isString=j,e.isSymbol=function(t){return'symbol'==typeof t},e.isUndefined=w,e.isRegExp=S,e.isObject=z,e.isDate=E,e.isError=x,e.isFunction=P,e.isPrimitive=function(t){return null===t||'boolean'==typeof t||'number'==typeof t||'string'==typeof t||'symbol'==typeof t||void 0===t},e.isBuffer=r(d[0]);var N=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];function F(){var t=new Date,n=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(':');return[t.getDate(),N[t.getMonth()],n].join(' ')}function k(t,n){return Object.prototype.hasOwnProperty.call(t,n)}e.log=function(){console.log('%s - %s',F(),e.format.apply(e,arguments))},e.inherits=r(d[1]),e._extend=function(t,n){if(!n||!z(n))return t;for(var o=Object.keys(n),u=o.length;u--;)t[o[u]]=n[o[u]];return t};var A='undefined'!=typeof Symbol?Symbol('util.promisify.custom'):void 0;function _(t,n){if(!t){var o=new Error('Promise was rejected with a falsy value');o.reason=t,t=o}return n(t)}e.promisify=function(n){if('function'!=typeof n)throw new TypeError('The "original" argument must be of type Function');if(A&&n[A]){var o;if('function'!=typeof(o=n[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(o,A,{value:o,enumerable:!1,writable:!1,configurable:!0}),o}function o(){for(var t,o,u=new Promise((function(n,u){t=n,o=u})),c=[],s=0;s<arguments.length;s++)c.push(arguments[s]);c.push((function(n,u){n?o(n):t(u)}));try{n.apply(this,c)}catch(t){o(t)}return u}return Object.setPrototypeOf(o,Object.getPrototypeOf(n)),A&&Object.defineProperty(o,A,{value:o,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(o,t(n))},e.promisify.custom=A,e.callbackify=function(n){if('function'!=typeof n)throw new TypeError('The "original" argument must be of type Function');function o(){for(var t=[],o=0;o<arguments.length;o++)t.push(arguments[o]);var u=t.pop();if('function'!=typeof u)throw new TypeError('The last argument must be of type Function');var c=this,s=function(){return u.apply(c,arguments)};n.apply(this,t).then((function(t){process.nextTick(s,null,t)}),(function(t){process.nextTick(_,t,s)}))}return Object.setPrototypeOf(o,Object.getPrototypeOf(n)),Object.defineProperties(o,t(n)),o}}),"7ca195",["956027","ad369f"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildProductKey=function(o,t){return`${o}__${t}`},e.buildUniqueKey=function(o,t){switch(o){case'STAY':return l(t);case'PLACE':return s(t);case'EXPERIENCE':return u(t);default:throw new Error(`invalid type and rawId: ${o}, ${t}`)}},e.buildUniqueKeyFromItem=function(o){const{type:t,rawId:n}=o;if(t&&n)switch(t){case'STAY':return l(n);case'PLACE':return s(n);case'EXPERIENCE':return u(n);default:throw new Error(`invalid type and rawId: ${t}, ${n}`)}return},e.normalizeMapItemResponseItems=function(t){return t.map(v).filter(o.default)},e.normalizeMapResponseItems=function(t){return t.map(c).filter(o.default)},e.normalizeMapResponseV2Items=function(t){return t.map(y).filter(o.default)},e.priorityToZindex=function(o,n=t.SECONDARY_BASE_Z_INDEX){if(null==o)return n;const l=Math.round(Number(o));if(Number.isFinite(l))return n-l;return n};var o=babelHelpers.interopRequireDefault(r(d[0])),t=r(d[1]),n=r(d[2]);function l(o){return"STAY__"+o}function s(o){return"PLACE__"+o}function u(o){return"EXPERIENCE__"+o}function c(t){const l=t.type?'PLACE'===(s=t.type)?n.ProductType.PLACE:'EXPERIENCE'===s?n.ProductType.EXPERIENCE:'STAY'===s||'MARKETPLACE_STAY'===s||'LUX_STAY'===s||'PLUS_STAY'===s?n.ProductType.STAY:void 0:void 0;var s;const u=l===n.ProductType.PLACE?t.contentId:t.rawId;var c,v;if(l&&null!=t.lat&&Number.isFinite(t.lat)&&null!=t.lng&&Number.isFinite(t.lng)&&null!=u)return{contentId:t.contentId||'',contentIdType:'SHIBUYA_PLACE_ID'===t.contentIdType?'Shibuya':'Acp',actionKicker:t.actionKicker||void 0,airmoji:t.airmoji||void 0,bookedTripUuid:t.bookedTripUuid||void 0,description:t.description||void 0,isBooked:t.isBooked||void 0,isObfuscated:t.isObfuscated||void 0,isSaved:t.isSaved||void 0,isSuperhostStay:t.isSuperhostStay||void 0,pinColor:t.pinColor||void 0,dlsIcon:t.dlsIcon||void 0,isUserGeneratedContent:t.isUserGeneratedContent||void 0,lat:t.lat,lng:t.lng,photos:(t.photos||[]).filter(o.default),polygons:(t.polygons||[]).filter(o.default),price:t.price||void 0,priceString:t.priceString||void 0,priority:t.priority||void 0,rating:t.rating||void 0,ratingCount:t.ratingCount||void 0,rawId:u,shortDescription:t.shortDescription||void 0,shortSubdescription:t.shortSubdescription||void 0,shortTitle:t.shortTitle||void 0,stayFormattedBadges:(t.stayFormattedBadges||[]).filter(o.default)||void 0,stayPricingQuote:t.stayPricingQuote||void 0,stayTierId:t.stayTierId||void 0,subdescription:t.subdescription||void 0,title:t.title||void 0,longTitle:t.title2||void 0,type:l,stayKickerContent:t.stayKickerContent,isNewListing:t.isNewListing||void 0,stayContextualPictures:(t.stayContextualPictures||[]).filter(o.default)||void 0,stayOverview:(t.stayOverview||[]).filter(o.default)||void 0,firstThumbnailUrl:(null===(c=t.photos)||void 0===c||null===(v=c[0])||void 0===v?void 0:v.thumbnailUrl)||void 0}}function v(t){var l,s,u,c;const v=t.acpId,{iconPin:p,mapCard:y}=t;var f,C;if(null!=(null==p||null===(l=p.coordinate)||void 0===l?void 0:l.lat)&&Number.isFinite(null==p||null===(s=p.coordinate)||void 0===s?void 0:s.lat)&&null!=(null==p||null===(u=p.coordinate)||void 0===u?void 0:u.lng)&&Number.isFinite(null==p||null===(c=p.coordinate)||void 0===c?void 0:c.lng)&&null!=v&&null!==y)return{contentId:t.acpId||'',contentIdType:'Acp',actionKicker:y.actionKicker||void 0,description:y.description1||void 0,isSaved:t.isSaved||void 0,pinColor:p.pinColor||void 0,dlsIcon:p.dlsIcon||void 0,isUserGeneratedContent:t.isUserQueried||void 0,lat:p.coordinate.lat,lng:p.coordinate.lng,photos:(y.photos||[]).filter(o.default),polygons:[],priority:null!=t.score?""+t.score:void 0,rawId:v,shortDescription:y.description1||void 0,shortSubdescription:y.subdescription1||void 0,shortTitle:y.title1||void 0,subdescription:y.subdescription1||void 0,title:y.title1||void 0,type:n.ProductType.PLACE,stayKickerContent:null,firstThumbnailUrl:(null===(f=y.photos)||void 0===f||null===(C=f[0])||void 0===C?void 0:C.thumbnailUrl)||void 0}}const p=[];function y(t){var l,s,u,c,v,y,f,C;const I='MapsPlaceItem'===t.__typename?n.ProductType.PLACE:void 0,P=I===n.ProductType.PLACE?t.acpId:t.mapItemGuid;var b,E,h,T,S,A,_,U,w,N;if(I&&null!=(null===(l=t.iconPin)||void 0===l||null===(s=l.coordinate)||void 0===s?void 0:s.lat)&&Number.isFinite(null===(u=t.iconPin)||void 0===u||null===(c=u.coordinate)||void 0===c?void 0:c.lat)&&null!=(null===(v=t.iconPin)||void 0===v||null===(y=v.coordinate)||void 0===y?void 0:y.lng)&&Number.isFinite(null===(f=t.iconPin)||void 0===f||null===(C=f.coordinate)||void 0===C?void 0:C.lng)&&null!=P)return{contentId:t.acpId||'',contentIdType:'Acp',actionKicker:(null===(b=t.mapCard)||void 0===b?void 0:b.actionKicker)||void 0,pinColor:t.iconPin.pinColor||void 0,description:(null===(E=t.mapCard)||void 0===E?void 0:E.description1)||void 0,subdescription:(null===(h=t.mapCard)||void 0===h?void 0:h.subdescription1)||void 0,isSaved:t.isSaved||void 0,bookedTripUuid:void 0,isBooked:void 0,isObfuscated:void 0,isSuperhostStay:void 0,price:void 0,priceString:void 0,rating:void 0,ratingCount:void 0,isNewListing:void 0,stayContextualPictures:void 0,stayOverview:void 0,stayFormattedBadges:void 0,stayPricingQuote:void 0,stayTierId:void 0,stayKickerContent:null,dlsIcon:t.iconPin.dlsIcon||void 0,isUserGeneratedContent:t.isUserQueried||void 0,lat:t.iconPin.coordinate.lat,lng:t.iconPin.coordinate.lng,photos:((null===(T=t.mapCard)||void 0===T?void 0:T.photos)||[]).filter(o.default),polygons:p,priority:null!=t.score?""+1e4*t.score:void 0,rawId:P,shortDescription:(null===(S=t.mapCard)||void 0===S?void 0:S.description1)||void 0,shortSubdescription:(null===(A=t.mapCard)||void 0===A?void 0:A.subdescription1)||void 0,shortTitle:(null===(_=t.mapCard)||void 0===_?void 0:_.title1)||void 0,title:t.iconPin.title||void 0,longTitle:void 0,type:I,firstThumbnailUrl:(null===(U=t.mapCard)||void 0===U||null===(w=U.photos)||void 0===w||null===(N=w[0])||void 0===N?void 0:N.thumbnailUrl)||void 0}}}),"7f44bd",["d89d24","6ba116","bc3ba2"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({prefer:s=t.LabelPosition.Right,position:u,title:f="",subTitle:L="",markerSize:b=t.MarkerSize.medium}){const{mapSize:h,center:P,zoom:c}=(0,n.useViewportSizeContext)()||{};if(!h||!P||!c)return s;const z=(0,o.fromLatLngToCenterPixel)(u,c,P),p=(function({title:t,subTitle:n,markerSize:o}){const s=l.MarkerSizeMapping[o],u=6.5*t.length,f=5.3*n.length;return Math.min(134,Math.max(u,f))+s/2})({title:f,subTitle:L,markerSize:b});if(s===t.LabelPosition.Right)return z.x+p>h.width/2?t.LabelPosition.Left:t.LabelPosition.Right;if(s===t.LabelPosition.Left)return z.x-p<-h.width/2?t.LabelPosition.Right:t.LabelPosition.Left;return t.LabelPosition.Left};var t=r(d[0]),n=r(d[1]),o=r(d[2]),l=r(d[3])}),"8d4d89",["bc3ba2","4093cd","f00eec","f9bd41"]);
__d((function(g,r,i,a,m,e,d){"use strict";m.exports=function(t){return t&&'object'==typeof t&&'function'==typeof t.copy&&'function'==typeof t.fill&&'function'==typeof t.readUInt8}}),"956027",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2LatLngRect=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]),l=r(d[3]),o=r(d[4]),h=r(d[5]),u=r(d[6]),c=r(d[7]),L=r(d[8]);class S{constructor(t,n){this.lat=t,this.lng=n}static fromLatLng(s,l){return new S(new n.R1Interval(s.latRadians,l.latRadians),new t.S1Interval(s.lngRadians,l.lngRadians))}static empty(){return new S(n.R1Interval.empty(),t.S1Interval.empty())}static full(){return new S(S.fullLat(),t.S1Interval.full())}static fullLat(){return new n.R1Interval(-l.S2.M_PI_2,l.S2.M_PI_2)}static fromCenterSize(t,n){return S.fromPoint(t).expanded(n.mul(.5))}static fromPoint(t){return S.fromLatLng(t,t)}static fromPointPair(s,l){return new S(n.R1Interval.fromPointPair(s.latRadians,l.latRadians),t.S1Interval.fromPointPair(s.lngRadians,l.lngRadians))}static fromEdge(t,h){const u=S.fromPointPair(s.S2LatLng.fromPoint(t),s.S2LatLng.fromPoint(h)),c=l.S2.robustCrossProd(t,h),L=o.S2Point.crossProd(c,new o.S2Point(0,0,1)),P=L.dotProd(t);if(P*L.dotProd(h)>=0)return u;const f=Math.acos(c.z/Math.abs(c.norm()));return new S(P<0?new n.R1Interval(u.lat.lo,f):new n.R1Interval(-f,u.lat.hi),u.lng)}isValid(){return Math.abs(this.lat.lo)<=l.S2.M_PI_2&&Math.abs(this.lat.hi)<=l.S2.M_PI_2&&this.lng.isValid()&&this.lat.isEmpty()==this.lng.isEmpty()}lo(){return new s.S2LatLng(this.lat.lo,this.lng.lo)}hi(){return new s.S2LatLng(this.lat.hi,this.lng.hi)}latLo(){return h.S1Angle.radians(this.lat.lo)}latHi(){return h.S1Angle.radians(this.lat.hi)}lngLo(){return h.S1Angle.radians(this.lng.lo)}lngHi(){return h.S1Angle.radians(this.lng.hi)}isEmpty(){return this.lat.isEmpty()}isFull(){return this.lat.equals(S.fullLat())&&this.lng.isFull()}isInverted(){return this.lng.isInverted()}getVertex(t){switch(t){case 0:return this.lo();case 1:return new s.S2LatLng(this.lat.lo,this.lng.hi);case 2:return this.hi();case 3:return new s.S2LatLng(this.lat.hi,this.lng.lo);default:throw new Error("Invalid vertex index.")}}getCenter(){return new s.S2LatLng(this.lat.getCenter(),this.lng.getCenter())}getDistanceLL(n){if(this.isEmpty())throw new Error;if(!n.isValid())throw new Error('point is not valid');if(this.lng.contains(n.lngRadians))return new h.S1Angle(Math.max(0,Math.max(n.latRadians-this.lat.hi,this.lat.lo-n.latRadians)));const o=new t.S1Interval(this.lng.hi,this.lng.complement().getCenter());let c=this.lng.lo;o.contains(n.lngRadians)&&(c=this.lng.hi);const L=new s.S2LatLng(this.lat.lo,c).toPoint(),S=new s.S2LatLng(this.lat.hi,c).toPoint(),P=new s.S2LatLng(0,c-l.S2.M_PI_2).normalized().toPoint();return u.S2EdgeUtil.getDistance(n.toPoint(),L,S,P)}getDistanceLLR(n){const o=n;if(this.isEmpty())throw new Error;if(o.isEmpty())throw new Error;if(this.lng.intersects(o.lng)){if(this.lat.intersects(o.lat))return new h.S1Angle(0);let t,n;return this.lat.lo>o.lat.hi?(t=o.lat.hi,n=this.lat.lo):(t=this.lat.hi,n=o.lat.lo),h.S1Angle.radians(n.radians()-t.radians())}let c,L;const S=t.S1Interval.fromPointPair(this.lng.lo,o.lng.hi),P=t.S1Interval.fromPointPair(this.lng.hi,o.lng.lo);S.getLength()<P.getLength()?(c=this.lng.lo,L=o.lng.hi):(c=this.lng.hi,L=o.lng.lo);const f=new s.S2LatLng(this.lat.lo,c).toPoint(),w=new s.S2LatLng(this.lat.hi,c).toPoint(),p=new s.S2LatLng(0,c.radians().minus(l.S2.M_PI_2)).normalized().toPoint(),R=new s.S2LatLng(o.lat.lo,L).toPoint(),I=new s.S2LatLng(o.lat.hi,L).toPoint(),E=new s.S2LatLng(0,L.radians().minus(l.S2.M_PI_2)).normalized().toPoint();return h.S1Angle.min(u.S2EdgeUtil.getDistance(f,R,I,E),h.S1Angle.min(u.S2EdgeUtil.getDistance(w,R,I,E),h.S1Angle.min(u.S2EdgeUtil.getDistance(R,f,w,p),u.S2EdgeUtil.getDistance(I,f,w,p))))}getSize(){return new s.S2LatLng(this.lat.getLength(),this.lng.getLength())}containsLL(t){return this.lat.contains(t.latRadians)&&this.lng.contains(t.lngRadians)}interiorContainsP(t){return this.interiorContainsLL(s.S2LatLng.fromPoint(t))}interiorContainsLL(t){return this.lat.interiorContains(t.latRadians)&&this.lng.interiorContains(t.lngRadians)}containsLLR(t){return this.lat.containsI(t.lat)&&this.lng.containsI(t.lng)}interiorContainsLLR(t){return this.lat.interiorContainsI(t.lat)&&this.lng.interiorContainsI(t.lng)}intersectsLLR(t){return this.lat.intersects(t.lat)&&this.lng.intersects(t.lng)}intersects(n){if(this.isEmpty())return!1;if(this.containsP(n.getCenterRaw()))return!0;if(n.contains(this.getCenter().toPoint()))return!0;if(!this.intersectsLLR(n.getRectBound()))return!1;const l=new Array(4),o=new Array(4);for(let t=0;t<4;++t)if(l[t]=n.getVertex(t),o[t]=s.S2LatLng.fromPoint(l[t]),this.containsLL(o[t]))return!0;for(let n=0;n<4;++n){const s=t.S1Interval.fromPointPair(o[n].lngRadians,o[n+1&3].lngRadians);if(!this.lng.intersects(s))continue;const h=l[n],u=l[n+1&3];if(s.contains(this.lng.lo)&&S.intersectsLngEdge(h,u,this.lat,this.lng.lo))return!0;if(s.contains(this.lng.hi)&&S.intersectsLngEdge(h,u,this.lat,this.lng.hi))return!0;if(S.intersectsLatEdge(h,u,this.lat.lo,this.lng))return!0;if(S.intersectsLatEdge(h,u,this.lat.hi,this.lng))return!0}return!1}interiorIntersects(t){return this.lat.interiorIntersects(t.lat)&&this.lng.interiorIntersects(t.lng)}addPoint(t){return this.addPointLL(s.S2LatLng.fromPoint(t))}addPointLL(t){const n=this.lat.addPoint(t.latRadians),s=this.lng.addPoint(t.lngRadians);return new S(n,s)}expanded(t){return this.isEmpty()?this:new S(this.lat.expanded(t.latRadians).intersection(S.fullLat()),this.lng.expanded(t.lngRadians))}polarClosure(){return this.lat.lo==-l.S2.M_PI_2||this.lat.hi==l.S2.M_PI_2?new S(this.lat,t.S1Interval.full()):this}union(t){return new S(this.lat.union(t.lat),this.lng.union(t.lng))}intersection(t){const n=this.lat.intersection(t.lat),s=this.lng.intersection(t.lng);return n.isEmpty()||s.isEmpty()?S.empty():new S(n,s)}area(){return this.isEmpty()?0:this.lng.getLength()*(Math.sin(this.lat.hi)-Math.abs(Math.sin(this.lat.lo)))}equals(t){return t instanceof S&&(this.lat.equals(t.lat)&&this.lng.equals(t.lng))}approxEquals(t,n=1e-15){return this.lat.approxEquals(t.lat,n)&&this.lng.approxEquals(t.lng,n)}clone(){return new S(this.lat,this.lng)}getCapBound(){if(this.isEmpty())return c.S2Cap.empty();let t=0,n=0;this.lat.lo+this.lat.hi<0?(t=-1,n=l.S2.M_PI_2+this.lat.hi):(t=1,n=l.S2.M_PI_2-this.lat.lo);const s=c.S2Cap.fromAxisAngle(new o.S2Point(0,0,t),h.S1Angle.radians(n)),u=this.lng.hi-this.lng.lo;if(L.Platform.IEEEremainder(u,2*l.S2.M_PI)>=0&&u<2*l.S2.M_PI){let t=c.S2Cap.fromAxisAngle(this.getCenter().toPoint(),h.S1Angle.radians(0));for(let n=0;n<4;++n)t=t.addPoint(this.getVertex(n).toPoint());if(t.height()<s.height())return t}return s}getRectBound(){return this}containsC(t){return this.containsLLR(t.getRectBound())}mayIntersectC(t){return this.intersectsLLR(t.getRectBound())}containsP(t){return this.containsLL(s.S2LatLng.fromPoint(t))}static intersectsLngEdge(t,n,o,h){return l.S2.simpleCrossing(t,n,new s.S2LatLng(o.lo,h).toPoint(),new s.S2LatLng(o.hi,h).toPoint())}static intersectsLatEdge(n,s,h,u){let c=o.S2Point.normalize(l.S2.robustCrossProd(n,s));c.z<0&&(c=o.S2Point.neg(c));const L=o.S2Point.normalize(l.S2.robustCrossProd(c,new o.S2Point(0,0,1))),S=o.S2Point.crossProd(L,c),P=Math.sin(h);if(Math.abs(P)>=S.z)return!1;const f=P/S.z,w=Math.sqrt(1-f*f),p=Math.atan2(w,f),R=t.S1Interval.fromPointPair(Math.atan2(n.dotProd(L),n.dotProd(S)),Math.atan2(s.dotProd(L),s.dotProd(S)));if(R.contains(p)){const t=o.S2Point.add(o.S2Point.mul(S,f),o.S2Point.mul(L,w));if(u.contains(Math.atan2(t.y,t.x)))return!0}if(R.contains(-1*p)){const t=o.S2Point.sub(o.S2Point.mul(S,f),o.S2Point.mul(L,w));if(u.contains(Math.atan2(t.y,t.x)))return!0}return!1}allVertex(){return[this.getVertex(0),this.getVertex(1),this.getVertex(2),this.getVertex(3)]}toGEOJSON(){return{type:'Feature',geometry:{type:'Polygon',coordinates:[this.allVertex().concat(this.getVertex(0)).map(t=>[parseFloat(t.lngDegrees.toFixed(5)),parseFloat(t.latDegrees.toFixed(5))])]},properties:{}}}toString(){return"[Lo="+this.lo().toString()+", Hi="+this.hi().toString()+"]"}}e.S2LatLngRect=S}),"9d200c",["e46169","4aaf2d","166121","e90871","6acac6","dafb27","dd748e","f134ec","256d77"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({items:l,mapBounds:s,enabled:o=!0,maxCacheSize:f=50,extractKey:b,extractLatLng:p,validationKey:h}){const v=(0,n.default)(l),C=(0,n.default)(h),x=(0,t.useRef)(!1),y=(0,t.useRef)(void 0);h!==C&&(x.current=!0);const R=(0,t.useCallback)(()=>(y.current||(y.current=new u.default(f)),y.current),[f]),_=(0,t.useCallback)(()=>{const t=s&&l?l.filter(t=>{const u=p(t);return!!u&&(0,c.withinBounds)(s,u)}):l;((t,u=[],n)=>{u.forEach(u=>{const c=n(u);c&&t.set(c,u)})})(R(),t,b)},[s,l,R,p,b]),k=(0,t.useMemo)(()=>(s&&(((t,u,n)=>{t.forEach((t,l,s)=>{const o=n(t);o&&(0,c.withinBounds)(u,o)||s.delete(l)})})(R(),s,p),v!==l&&(x.current?(R().clear(),x.current=!1):o||R().clear(),_())),Array.from(R().values())),[v,l,_,o,s,p,R]),w=(0,t.useCallback)(()=>{x.current=!0},[]);return{itemsWithCache:k,purgeOnNextUpdate:w}};var t=r(d[0]),u=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),c=r(d[3])}),"a442d8",["d7ed8e","486497","71657b","f00eec"]);
__d((function(g,r,i,a,m,e,d){'use strict';var t={uint16:Uint16Array,uint8:Uint8Array};m.exports=t}),"a5e7c5",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2CellId=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),S=r(d[4]),h=r(d[5]),f=function(n){return t.fromString(n,!1,16)};class c{constructor(n){this.id='string'==typeof n?t.fromString(n):n}get face(){return this.id.shiftRightUnsigned(c.POS_BITS).toInt()}lowestOnBit(){return c.lowestOnBit(this.id)}static lowestOnBit(t){return t.and(t.negate())}static none(){return new c(new t(0))}static sentinel(){return new c(c.MAX_UNSIGNED)}getBits1(t,n,s,S){const h=7==s?c.MAX_LEVEL-7*c.LOOKUP_BITS:c.LOOKUP_BITS;return S+=(this.id.shiftRightUnsigned(2*s*c.LOOKUP_BITS+1).getLowBitsUnsigned()&(1<<2*h)-1)<<2,S=c.LOOKUP_IJ[S],t.val=t.val+(S>>c.LOOKUP_BITS+2<<s*c.LOOKUP_BITS),n.val=n.val+((S>>2&(1<<c.LOOKUP_BITS)-1)<<s*c.LOOKUP_BITS),S&=o.S2.SWAP_MASK|o.S2.INVERT_MASK}static lowestOnBitForLevel(n){return new t(1).shiftLeft(2*(c.MAX_LEVEL-n))}toFaceIJOrientation(n,s,S){const h=this.face;let f=h&o.S2.SWAP_MASK;for(let t=7;t>=0;--t)f=this.getBits1(n,s,t,f);return null!=S&&(t.fromString('0x1111111111111110',!0,16).and(this.lowestOnBit()).notEquals(0)&&(f^=o.S2.SWAP_MASK),S.val=f),h}toIJOrientation(){let n=this.face&o.S2.SWAP_MASK,s=0,S=0;for(let t=7;t>=0;--t){const h=7==t?c.MAX_LEVEL-7*c.LOOKUP_BITS:c.LOOKUP_BITS;n+=(this.id.shiftRightUnsigned(2*t*c.LOOKUP_BITS+1).getLowBitsUnsigned()&(1<<2*h)-1)<<2,n=c.LOOKUP_IJ[n],s+=n>>c.LOOKUP_BITS+2<<t*c.LOOKUP_BITS,S+=(n>>2&(1<<c.LOOKUP_BITS)-1)<<t*c.LOOKUP_BITS,n&=o.S2.SWAP_MASK|o.S2.INVERT_MASK}t.fromString('0x1111111111111110',!0,16).and(this.lowestOnBit()).notEquals(0)&&(n^=o.S2.SWAP_MASK);const h=n;return t.fromInt(s).shiftLeft(c.I_SHIFT).or(t.fromInt(S).shiftLeft(c.J_SHIFT)).or(h)}getI(){return c.getI(this.toIJOrientation())}static getI(t){return t.shiftRightUnsigned(this.I_SHIFT).toInt()}getJ(){return c.getJ(this.toIJOrientation())}static getJ(t){return t.shiftRightUnsigned(this.J_SHIFT).and(c.J_MASK).toInt()}static getOrientation(t){return t.and(c.ORIENTATION_MASK).toInt()}isLeaf(){return 0!=this.id.and(1).getLowBits()}parentL(t){const n=c.lowestOnBitForLevel(t);return new c(this.id.and(n.negate()).or(n))}parent(){const t=this.lowestOnBit().shiftLeft(2);return new c(this.id.and(t.negate()).or(t))}static fromFacePosLevel(n,s,o){return new c(new t(n).shiftLeft(c.POS_BITS).add(s.or(1))).parentL(o)}static fromFace(t){return new c(c.fromFaceAsLong(t))}static fromPoint(t){const n=h.S2Projections.xyzToFaceP(t),o=h.S2Projections.faceToUvTransform(n),S=h.S2Projections.stToIj(s.R2Vector.singleUVToST(o.xyzToU(t.x,t.y,t.z))),f=h.S2Projections.stToIj(s.R2Vector.singleUVToST(o.xyzToV(t.x,t.y,t.z)));return this.fromFaceIJ(n,S,f)}getCenterUV(){const t=this.getCenterSiTi();return new s.R2Vector(s.R2Vector.singleStTOUV(h.S2Projections.siTiToSt(c.getSi(t))),s.R2Vector.singleStTOUV(h.S2Projections.siTiToSt(c.getTi(t))))}toPoint(){return n.S2Point.normalize(this.toPointRaw())}getCenterSiTi(){const n=this.toIJOrientation(),s=c.getI(n),o=c.getJ(n),S=this.isLeaf()?1:0!=(1&(new t(s).getLowBits()^this.id.getLowBits()>>>2))?2:0;return t.fromInt(2*s+S).shiftLeft(c.SI_SHIFT).or(c.TI_MASK.and(2*o+S))}static getSi(t){return t.shiftRight(c.SI_SHIFT).toInt()}static getTi(t){return t.toInt()}toPointRaw(){const t=this.getCenterSiTi();return h.S2Projections.faceSiTiToXYZ(this.face,c.getSi(t),c.getTi(t))}toLatLng(){return S.S2LatLng.fromPoint(this.toPointRaw())}isValid(){return this.face<c.NUM_FACES&&this.lowestOnBit().and(t.fromString('0x1555555555555555',!1,16)).notEquals(0)}pos(){return this.id.and(c.MAX_UNSIGNED.shiftRightUnsigned(c.FACE_BITS))}level(){if(this.isLeaf())return c.MAX_LEVEL;let t=this.id.getLowBits(),n=-1;return 0!=t?n+=16:t=this.id.shiftRightUnsigned(32).getLowBits(),t&=-t,0!=(21845&t)&&(n+=8),0!=(5570645&t)&&(n+=4),0!=(84215045&t)&&(n+=2),0!=(286331153&t)&&(n+=1),n}getSizeIJ(){return c.getSizeIJ(this.level())}static getSizeIJ(t){return 1<<o.S2.MAX_LEVEL-t}getSizeST(){return c.getSizeST(this.level())}static getSizeST(t){return h.S2Projections.ijToStMin(c.getSizeIJ(t))}isFace(){return 0===this.level()}childPosition(t){return this.id.shiftRight(2*(c.MAX_LEVEL-t)+1).and(3).getLowBits()}rangeMin(){return new c(this.id.sub(this.lowestOnBit().sub(1)))}rangeMax(){return new c(this.id.add(this.lowestOnBit().sub(1)))}contains(t){return t.greaterOrEquals(this.rangeMin())&&t.lessOrEquals(this.rangeMax())}intersects(t){return t.rangeMin().lessOrEquals(this.rangeMax())&&t.rangeMax().greaterOrEquals(this.rangeMin())}childBegin(){return new c(c.childBeginAsLong(this.id))}childBeginL(t){return new c(c.childBeginAsLongL(this.id,t))}childEnd(){return new c(c.childEndAsLong(this.id))}childEndL(t){return new c(c.childEndAsLongL(this.id,t))}static childBeginAsLong(t){const n=c.lowestOnBit(t);return t.subtract(n).add(n.shiftRightUnsigned(2))}static childBeginAsLongL(t,n){return t.subtract(c.lowestOnBit(t)).add(c.lowestOnBitForLevel(n))}static childEndAsLong(t){const n=c.lowestOnBit(t);return t.add(n).add(n.shiftRightUnsigned(2))}static childEndAsLongL(t,n){return t.add(c.lowestOnBit(t)).add(c.lowestOnBitForLevel(n))}static fromFaceAsLong(n){return t.fromInt(n).shiftLeft(c.POS_BITS).add(c.lowestOnBitForLevel(0))}next(){return new c(this.id.add(this.lowestOnBit().shiftLeft(1)))}prev(){return new c(this.id.sub(this.lowestOnBit().shiftLeft(1)))}nextWrap(){const t=this.next();return c.unsignedLongLessThan(t.id,c.WRAP_OFFSET)?t:new c(t.id.sub(c.WRAP_OFFSET))}prevWrap(){const t=this.prev();return t.id.lessThan(c.WRAP_OFFSET)?t:new c(t.id.add(c.WRAP_OFFSET))}static begin(n){return c.fromFacePosLevel(0,new t(0),0).childBeginL(n)}static end(n){return c.fromFacePosLevel(5,new t(0),0).childEndL(n)}static fromToken(n){if(null==n)throw new Error("Null string in S2CellId.fromToken");if(0==n.length)throw new Error("Empty string in S2CellId.fromToken");if(n.length>16||"X"==n)return c.none();let s=new t(0);for(let o=0;o<16;o++){let S=new t(0);if(o<n.length){if(S=t.fromString(n[o],!0,16),S.equals(-1))throw new Error(n);if(c.overflowInParse(s,S.toNumber()))throw new Error("Too large for unsigned long: "+n)}s=s.mul(16).add(S)}return new c(s)}toToken(){if(this.id.equals(0))return"X";const t=this.id.toUnsigned().toString(16);let n='';for(let s=t.length;s<16;s++)n+='0';n+=t;for(let t=16;t>0;t--)if('0'!=n[t-1])return n.substring(0,t);throw new Error("Shouldn't make it here")}static overflowInParse(t,n,s=10){return!t.greaterThanOrEqual(0)||!t.lessThan(c.maxValueDivs[s])&&(!!t.greaterThan(c.maxValueDivs[s])||n>c.maxValueMods[s])}getEdgeNeighbors(){const t=this.level(),n=this.getSizeIJ(),s=this.face,o=this.toIJOrientation(),S=c.getI(o),h=c.getJ(o),f=[];return f.push(c.fromFaceIJSame(s,S,h-n,h-n>=0).parentL(t)),f.push(c.fromFaceIJSame(s,S+n,h,S+n<c.MAX_SIZE).parentL(t)),f.push(c.fromFaceIJSame(s,S,h+n,h+n<c.MAX_SIZE).parentL(t)),f.push(c.fromFaceIJSame(s,S-n,h,S-n>=0).parentL(t)),f}getVertexNeighbors(t){const n=this.toIJOrientation(),s=c.getI(n),o=c.getJ(n),S=c.getSizeIJ(t+1),h=S<<1;let f,u,I,l;0!=(s&S)?(I=h,f=s+h<c.MAX_SIZE):(I=-h,f=s-h>=0),0!=(o&S)?(l=h,u=o+h<c.MAX_SIZE):(l=-h,u=o-h>=0);const L=[],O=this.face;return L.push(this.parentL(t)),L.push(c.fromFaceIJSame(O,s+I,o,f).parentL(t)),L.push(c.fromFaceIJSame(O,s,o+l,u).parentL(t)),(f||u)&&L.push(c.fromFaceIJSame(O,s+I,o+l,f&&u).parentL(t)),L}getAllNeighbors(t){const n=this.toIJOrientation(),s=this.getSizeIJ(),o=this.face,S=c.getI(n)&-s,h=c.getJ(n)&-s,f=c.getSizeIJ(t),u=[];for(let n=-f;;n+=f){let I;if(n<0?I=h+n>=0:n>=s?I=h+n<c.MAX_SIZE:(I=!0,u.push(c.fromFaceIJSame(o,S+n,h-f,h-s>=0).parentL(t)),u.push(c.fromFaceIJSame(o,S+n,h+s,h+s<c.MAX_SIZE).parentL(t))),u.push(c.fromFaceIJSame(o,S-f,h+n,I&&S-s>=0).parentL(t)),u.push(c.fromFaceIJSame(o,S+s,h+n,I&&S+s<c.MAX_SIZE).parentL(t)),n>=s)break}return u}static fromFaceIJ(n,s,o){const S=new t(n),h=[new t(0),S.shiftLeft(c.POS_BITS-33)];let f=S.and(c.SWAP_MASK);for(let t=7;t>=0;--t)f=c.getBits(h,s,o,t,f);return new c(h[1].shiftLeft(32).add(h[0]).shiftLeft(1).add(1))}static getBits(n,s,o,S,h){const f=new t(1).shiftLeft(c.LOOKUP_BITS).sub(1);return h=(h=h.add(new t(s).shiftRight(S*c.LOOKUP_BITS).and(f).shiftLeft(c.LOOKUP_BITS+2))).add(new t(o).shiftRight(S*c.LOOKUP_BITS).and(f).shiftLeft(2)),h=c.LOOKUP_POS[h.toNumber()],n[S>>2]=n[S>>2].or(h.shiftRight(2).shiftLeft(2*(3&S)*c.LOOKUP_BITS)),h.and(c.SWAP_MASK|c.INVERT_MASK)}static stToIJ(t){const n=c.MAX_SIZE/2;return Math.max(0,Math.min(2*n-1,Math.round(n*t+n-.5)))}static fromFaceIJWrap(n,o,S){o=Math.max(-1,Math.min(c.MAX_SIZE,o)),S=Math.max(-1,Math.min(c.MAX_SIZE,S));const h=1/c.MAX_SIZE,f=h*new t(o).shiftLeft(1).add(1).sub(c.MAX_SIZE).toInt(),u=h*new t(S).shiftLeft(1).add(1).sub(c.MAX_SIZE).toInt(),I=new s.R2Vector(f,u).toPoint(n);n=I.toFace();const l=I.toR2Vector(n);return c.fromFaceIJ(n,c.stToIJ(l.x),c.stToIJ(l.y))}static fromFaceIJSame(t,n,s,o){return o?c.fromFaceIJ(t,n,s):c.fromFaceIJWrap(t,n,s)}static unsignedLongLessThan(t,n){return t.toUnsigned().lessThan(n.toUnsigned())}static unsignedLongGreaterThan(t,n){return t.toUnsigned().greaterThan(n.toUnsigned())}lessThan(t){return c.unsignedLongLessThan(this.id,t.id)}greaterThan(t){return c.unsignedLongGreaterThan(this.id,t.id)}lessOrEquals(t){return c.unsignedLongLessThan(this.id,t.id)||this.id.equals(t.id)}greaterOrEquals(t){return c.unsignedLongGreaterThan(this.id,t.id)||this.id.equals(t.id)}toString(){return"(face="+this.face+", pos="+this.pos().toString(16)+", level="+this.level()+")"}compareTo(t){return c.unsignedLongLessThan(this.id,t.id)?-1:c.unsignedLongGreaterThan(this.id,t.id)?1:0}equals(t){return 0===this.compareTo(t)}static binarySearch(n,s,o=0){let S;s instanceof c?S=s:s instanceof t&&(S=new c(s));let h=n.length-1;for(;o<=h;){const t=o+h>>>1,s=n[t].compareTo(S);if(s<0)o=t+1;else{if(!(s>0))return t;h=t-1}}return-(o+1)}static indexedBinarySearch(t,n,s=0){const o=this.binarySearch(t,n,s);return o>=0?o:-(o+1)}}function u(t,n,s,S,h,f){if(t==c.LOOKUP_BITS){const t=(n<<c.LOOKUP_BITS)+s;c.LOOKUP_POS[(t<<2)+S]=h.shiftLeft(2).add(f),c.LOOKUP_IJ[h.shiftLeft(2).add(S).toNumber()]=(t<<2)+f}else{t++,n<<=1,s<<=1,h=h.shiftLeft(2);for(let c=0;c<4;c++){const I=o.S2.POS_TO_IJ[f][c],l=o.S2.POS_TO_ORIENTATION[c];u(t,n+(I>>>1),s+(1&I),S,h.add(c),f^l)}}}e.S2CellId=c,c.FACE_BITS=3,c.NUM_FACES=6,c.MAX_LEVEL=30,c.POS_BITS=2*c.MAX_LEVEL+1,c.MAX_SIZE=1<<c.MAX_LEVEL,c.maxValueDivs=[new t(0),new t(0),f('9223372036854775807'),f('6148914691236517205'),f('4611686018427387903'),f('3689348814741910323'),f('3074457345618258602'),f('2635249153387078802'),f('2305843009213693951'),f('2049638230412172401'),f('1844674407370955161'),f('1676976733973595601'),f('1537228672809129301'),f('1418980313362273201'),f('1317624576693539401'),f('1229782938247303441'),f('1152921504606846975'),f('1085102592571150095'),f('1024819115206086200'),f('970881267037344821'),f('922337203685477580'),f('878416384462359600'),f('838488366986797800'),f('802032351030850070'),f('768614336404564650'),f('737869762948382064'),f('709490156681136600'),f('683212743470724133'),f('658812288346769700'),f('636094623231363848'),f('614891469123651720'),f('595056260442243600'),f('576460752303423487'),f('558992244657865200'),f('542551296285575047'),f('527049830677415760'),f('512409557603043100')],c.maxValueMods=[0,0,1,0,3,0,3,1,7,6,5,4,3,2,1,0,15,0,15,16,15,15,15,5,15,15,15,24,15,23,15,15,31,15,17,15,15],c.MAX_UNSIGNED=t.fromString('0xffffffffffffffff',!0,16),c.LOOKUP_BITS=4,c.SWAP_MASK=1,c.INVERT_MASK=2,c.I_SHIFT=33,c.J_SHIFT=2,c.J_MASK=t.fromInt(1).shiftLeft(31).subtract(1),c.SI_SHIFT=32,c.ORIENTATION_MASK=t.fromInt(1).shiftLeft(2).subtract(1),c.TI_MASK=t.fromInt(1).shiftLeft(32).subtract(1),c.LOOKUP_POS=[],c.LOOKUP_IJ=[],c.WRAP_OFFSET=new t(c.NUM_FACES).shiftLeft(c.POS_BITS),u(0,0,0,0,new t(0),0),u(0,0,0,o.S2.SWAP_MASK,new t(0),o.S2.SWAP_MASK),u(0,0,0,o.S2.INVERT_MASK,new t(0),o.S2.INVERT_MASK),u(0,0,0,o.S2.SWAP_MASK|o.S2.INVERT_MASK,new t(0),o.S2.SWAP_MASK|o.S2.INVERT_MASK)}),"aa68f0",["754175","6acac6","f1ee27","e90871","166121","c9b1c7"]);
__d((function(g,r,i,a,m,e,d){'use strict';var n,t=r(d[0]);m.exports=((n=new t.uint16(1))[0]=4660,52===new t.uint8(n.buffer)[0])}),"aafc9a",["a5e7c5"]);
__d((function(g,r,i,a,m,e,d){"use strict";'function'==typeof Object.create?m.exports=function(t,o){t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:m.exports=function(t,o){t.super_=o;var p=function(){};p.prototype=o.prototype,t.prototype=new p,t.prototype.constructor=t}}),"ad369f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSimpleCovering=function({mapBounds:t,s2Level:o}){const s=t.sw.lat,l=t.sw.lng,u=t.ne.lat,L=t.ne.lng,c=n.S2LatLng.fromDegrees(s,l),f=n.S2LatLng.fromDegrees(u,L),v=n.S2LatLngRect.fromPointPair(c,f),S=v.getCenter().toPoint();return n.S2RegionCoverer.getSimpleCovering(v,S,o).map(n=>n.toToken())};var n=r(d[0])}),"afee13",["ef9cac"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zoomToS2Level=function(t){if(t<5)return 3;if(t>=11&&t<=18)return t-2;if(t>18)return 17;return t-1}}),"bbcb45",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2Projections=void 0;const t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),c=r(d[4]);var T;!(function(t){t[t.S2_LINEAR_PROJECTION=0]="S2_LINEAR_PROJECTION",t[t.S2_TAN_PROJECTION=1]="S2_TAN_PROJECTION",t[t.S2_QUADRATIC_PROJECTION=2]="S2_QUADRATIC_PROJECTION"})(T||(T={}));class S{static getUNorm(t,n){switch(t){case 0:return new o.S2Point(n,-1,0);case 1:return new o.S2Point(1,n,0);case 2:return new o.S2Point(1,0,n);case 3:return new o.S2Point(-n,0,1);case 4:return new o.S2Point(0,-n,1);default:return new o.S2Point(0,-1,-n)}}static getVNorm(t,n){switch(t){case 0:return new o.S2Point(-n,0,1);case 1:return new o.S2Point(0,-n,1);case 2:return new o.S2Point(0,-1,-n);case 3:return new o.S2Point(n,-1,0);case 4:return new o.S2Point(1,n,0);default:return new o.S2Point(1,0,n)}}static getUAxis(t){return S.getUVWAxis(t,0)}static getVAxis(t){return S.getUVWAxis(t,1)}static getNorm(t){return S.getUVWAxis(t,2)}static getUVWAxis(t,n){return S.FACE_UVW_AXES[t][n]}static faceSiTiToXYZ(t,n,o){const c=u.R2Vector.singleStTOUV(this.siTiToSt(n)),T=u.R2Vector.singleStTOUV(this.siTiToSt(o));return this.faceUvToXyz(t,c,T)}static faceUvToXyz(t,n,u){const c=this.faceToXyzTransform(t);return new o.S2Point(c.uvToX(n,u),c.uvToY(n,u),c.uvToZ(n,u))}static faceXyzToUv(t,n){if(t<3){if(n.get(t)<=0)return null}else if(n.get(t-3)>=0)return null;return S.validFaceXyzToUv(t,n)}static validFaceXyzToUv(t,n){const o=S.faceToUvTransform(t);return new u.R2Vector(o.xyzToU(n.x,n.y,n.z),o.xyzToV(n.x,n.y,n.z))}static ijToStMin(t){return 1/n.S2CellId.MAX_SIZE*t}static stToIj(t){return Math.max(0,Math.min(n.S2CellId.MAX_SIZE-1,Math.round(n.S2CellId.MAX_SIZE*t-.5)))}static siTiToSt(t){return 1/this.MAX_SITI.toNumber()*t}static ijToUV(t,n){return u.R2Vector.singleStTOUV(S.ijToStMin(t&-n))}static xyzToFaceP(t){return this.xyzToFace(t.x,t.y,t.z)}static xyzToFace(t,n,u){switch(o.S2Point.largestAbsComponent(t,n,u)){case 0:return t<0?3:0;case 1:return n<0?4:1;default:return u<0?5:2}}static faceToUvTransform(t){return S.UV_TRANSFORMS[t]}static faceToXyzTransform(t){return S.XYZ_TRANSFORMS[Math.min(5,t)]}}e.S2Projections=S,S.MIN_WIDTH=new t.S2Metric(1,2*t.S2.M_SQRT2/3),S.AVG_AREA=new t.S2Metric(2,4*t.S2.M_PI/6),S.MAX_LEVEL=30,S.FACE_UVW_AXES=[[o.S2Point.Y_POS,o.S2Point.Z_POS,o.S2Point.X_POS],[o.S2Point.X_NEG,o.S2Point.Z_POS,o.S2Point.Y_POS],[o.S2Point.X_NEG,o.S2Point.Y_NEG,o.S2Point.Z_POS],[o.S2Point.Z_NEG,o.S2Point.Y_NEG,o.S2Point.X_NEG],[o.S2Point.Z_NEG,o.S2Point.X_POS,o.S2Point.Y_NEG],[o.S2Point.Y_POS,o.S2Point.X_POS,o.S2Point.Z_NEG]],S.UV_TRANSFORMS=[{xyzToU:function(t,n,o){return n/t},xyzToV:function(t,n,o){return o/t}},{xyzToU:function(t,n,o){return-t/n},xyzToV:function(t,n,o){return o/n}},{xyzToU:function(t,n,o){return-t/o},xyzToV:function(t,n,o){return-n/o}},{xyzToU:function(t,n,o){return o/t},xyzToV:function(t,n,o){return n/t}},{xyzToU:function(t,n,o){return o/n},xyzToV:function(t,n,o){return-t/n}},{xyzToU:function(t,n,o){return-n/o},xyzToV:function(t,n,o){return-t/o}}],S.XYZ_TRANSFORMS=[{uvToX:function(t,n){return 1},uvToY:function(t,n){return t},uvToZ:function(t,n){return n}},{uvToX:function(t,n){return-t},uvToY:function(t,n){return 1},uvToZ:function(t,n){return n}},{uvToX:function(t,n){return-t},uvToY:function(t,n){return-n},uvToZ:function(t,n){return 1}},{uvToX:function(t,n){return-1},uvToY:function(t,n){return-n},uvToZ:function(t,n){return-t}},{uvToX:function(t,n){return n},uvToY:function(t,n){return-1},uvToZ:function(t,n){return-t}},{uvToX:function(t,n){return n},uvToY:function(t,n){return t},uvToZ:function(t,n){return-1}}],S.MAX_SITI=c.fromInt(1).shiftLeft(S.MAX_LEVEL+1)}),"c9b1c7",["e90871","aa68f0","6acac6","f1ee27","754175"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S1ChordAngle=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]);class h{constructor(t){this.length2=t,(0,s.checkArgument)(this.isValid())}static fromS2Point(t,c){(0,s.checkArgument)(n.S2.isUnitLength(t)),(0,s.checkArgument)(n.S2.isUnitLength(c));const u=Math.min(h.MAX_LENGTH2,t.getDistance2(c));return new h(u)}static fromS1Angle(n){if(n.radians<0)return h.NEGATIVE;if(n.equals(t.S1Angle.INFINITY))return h.INFINITY;{const t=2*Math.sin(.5*Math.min(Math.PI,n.radians));return new h(t*t)}}static fromLength2(t){return new h(Math.min(h.MAX_LENGTH2,t))}isZero(){return 0==this.length2}isNegative(){return this.length2<0}isInfinity(){return this.length2==Number.POSITIVE_INFINITY}isSpecial(){return this.isNegative()||this.isInfinity()}isValid(){return this.length2>=0&&this.length2<=h.MAX_LENGTH2||this.isNegative()||this.isInfinity()}toAngle(){return this.isNegative()?t.S1Angle.radians(-1):this.isInfinity()?t.S1Angle.INFINITY:t.S1Angle.radians(2*Math.asin(.5*Math.sqrt(this.length2)))}getLength2(){return this.length2}static add(t,n){(0,s.checkArgument)(!t.isSpecial()),(0,s.checkArgument)(!n.isSpecial());const c=t.length2,u=n.length2;if(0==u)return t;if(c+u>=h.MAX_LENGTH2)return h.STRAIGHT;const l=c*(1-.25*u),o=u*(1-.25*c);return new h(Math.min(h.MAX_LENGTH2,l+o+2*Math.sqrt(l*o)))}static sub(t,n){(0,s.checkArgument)(!t.isSpecial()),(0,s.checkArgument)(!n.isSpecial());const c=t.length2,u=n.length2;if(0==u)return t;if(c<=u)return h.ZERO;const l=c*(1-.25*u),o=u*(1-.25*c);return new h(Math.max(0,l+o-2*Math.sqrt(l*o)))}static min(t,n){return t.length2<=n.length2?t:n}static max(t,n){return t.length2>n.length2?t:n}static sin2(t){return(0,s.checkArgument)(!t.isSpecial()),t.length2*(1-.25*t.length2)}static sin(t){return Math.sqrt(this.sin2(t))}static cos(t){return(0,s.checkArgument)(!t.isSpecial()),1-.5*t.length2}static tan(t){return this.sin(t)/this.cos(t)}plusError(t){return this.isSpecial()?this:h.fromLength2(Math.max(0,Math.min(h.MAX_LENGTH2,this.length2+t)))}getS1AngleConstructorMaxError(){return n.S2.DBL_EPSILON*this.length2}getS2PointConstructorMaxError(){return 4.5*n.S2.DBL_EPSILON*this.length2+16*n.S2.DBL_EPSILON*n.S2.DBL_EPSILON}toString(){return this.toAngle().toString()}compareTo(t){return this.length2-t.length2}equals(t){return 0===this.compareTo(t)}}e.S1ChordAngle=h,h.MAX_LENGTH2=4,h.ZERO=new h(0),h.RIGHT=new h(2),h.STRAIGHT=new h(h.MAX_LENGTH2),h.INFINITY=new h(Number.POSITIVE_INFINITY),h.NEGATIVE=new h(-1)}),"c9e4f2",["dafb27","e90871","fdf600"]);
__d((function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);m.exports=function(n){var u=t(n);return(u=(2146435072&u)>>>20)-1023}}),"cdca12",["e1885b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2CellUnion=void 0;const l=r(d[0]),t=r(d[1]),s=r(d[2]),n=r(d[3]),c=r(d[4]),h=r(d[5]),o=r(d[6]),I=r(d[7]);e.S2CellUnion=class{constructor(){this.cellIds=[]}initFromIds(l){this.initRawIds(l),this.normalize()}initFromCellIds(l){this.initRawCellIds(l),this.normalize()}initSwap(l){this.initRawSwap(l),this.normalize()}initRawCellIds(l){this.cellIds=l}initRawIds(l){const s=l.length;this.cellIds=[];for(let n=0;n<s;n++)this.cellIds.push(new t.S2CellId(l[n]))}initRawSwap(l){this.cellIds=[].concat(l)}size(){return this.cellIds.length}cellId(l){return this.cellIds[l]}getCellIds(){return this.cellIds}denormalize(l,s){const n=[];for(let c=0;c<this.cellIds.length;c++){const h=this.cellIds[c],o=h.level();let I=Math.max(l,o);if(s>1&&(I+=(t.S2CellId.MAX_LEVEL-(I-l))%s,I=Math.min(t.S2CellId.MAX_LEVEL,I)),I==o)n.push(h);else{const l=h.childEndL(I);for(let t=h.childBeginL(I);!t.equals(l);t=t.next())n.push(t)}}return n}pack(){throw new Error('useless')}containsC(l){return this.containsCell(l)}mayIntersectC(l){return this.mayIntersectCell(l)}contains(l){let s=t.S2CellId.binarySearch(this.cellIds,l.id);return s<0&&(s=-s-1),!!(s<this.cellIds.length&&this.cellIds[s].rangeMin().lessOrEquals(l))||0!=s&&this.cellIds[s-1].rangeMax().greaterOrEquals(l)}intersects(l){let s=t.S2CellId.binarySearch(this.cellIds,l.id);return s<0&&(s=-s-1),!!(s<this.cellIds.length&&this.cellIds[s].rangeMin().lessOrEquals(l.rangeMax()))||0!=s&&this.cellIds[s-1].rangeMax().greaterOrEquals(l.rangeMin())}containsUnion(l){for(let t=0;t<l.cellIds.length;t++)if(!this.contains(l.cellIds[t]))return!1;return!0}containsCell(l){return this.contains(l.id)}intersectsUnion(l){for(let t=0;t<l.cellIds.length;t++)if(!this.intersects(l.cellIds[t]))return!1;return!0}getUnion(l,t){this.cellIds=[].concat(l.cellIds).concat(t.cellIds),this.normalize()}getIntersection(l,s){if(this.cellIds=[],l.contains(s))this.cellIds.push(s);else{let n=t.S2CellId.binarySearch(l.cellIds,s.rangeMin().id);n<0&&(n=-n-1);const c=s.rangeMax(),h=l.cellIds.length;for(;n<h&&l.cellIds[n].lessOrEquals(c);)this.cellIds.push(l.cellIds[n++])}}getIntersectionUU(l,s){this.cellIds=[];let n=0,c=0;for(;n<l.cellIds.length&&c<s.cellIds.length;){const h=l.cellId(n).rangeMin(),o=s.cellId(c).rangeMin();h.greaterThan(o)?l.cellId(n).lessOrEquals(s.cellId(c).rangeMax())?this.cellIds.push(l.cellId(n++)):(c=t.S2CellId.indexedBinarySearch(s.cellIds,h,c+1),l.cellId(n).lessOrEquals(s.cellId(c-1).rangeMax())&&--c):o.greaterThan(h)?s.cellId(c).lessOrEquals(l.cellId(n).rangeMax())?this.cellIds.push(s.cellId(c++)):(n=t.S2CellId.indexedBinarySearch(l.cellIds,o,n+1),s.cellId(c).lessOrEquals(l.cellId(n-1).rangeMax())&&--n):l.cellId(n).lessThan(s.cellId(c))?this.cellIds.push(l.cellId(n++)):this.cellIds.push(s.cellId(c++))}}expand(l){let s=[];const n=t.S2CellId.lowestOnBitForLevel(l);let c=this.size()-1;do{let t=this.cellId(c);if(t.lowestOnBit().lessThan(n))for(t=t.parentL(l);c>0&&t.contains(this.cellId(c-1));)--c;s.push(t),s=s.concat(t.getAllNeighbors(l))}while(--c>=0);this.initSwap(s)}expandA(l,s){let c=t.S2CellId.MAX_LEVEL;for(let l=0;l<this.cellIds.length;l++){const t=this.cellId(l);c=Math.min(c,t.level())}const h=n.S2Projections.MIN_WIDTH.getMaxLevel(l.radians);0==h&&l.radians>n.S2Projections.MIN_WIDTH.getValue(0)&&this.expand(0),this.expand(Math.min(c+s,h))}getCapBound(){if(0==this.cellIds.length)return o.S2Cap.empty();let l=new h.S2Point(0,0,0);this.cellIds.forEach(t=>{const n=s.S2Cell.averageArea(t.level());l=h.S2Point.add(l,h.S2Point.mul(t.toPoint(),n))}),l=l.equals(h.S2Point.ORIGIN)?h.S2Point.X_POS:h.S2Point.normalize(l);let t=o.S2Cap.fromAxisChord(l,I.S1ChordAngle.ZERO);return this.cellIds.forEach(l=>{t=t.addCap(new s.S2Cell(l).getCapBound())}),t}getRectBound(){let l=c.S2LatLngRect.empty();return this.cellIds.forEach(t=>{l=l.union(new s.S2Cell(t).getRectBound())}),l}mayIntersectCell(l){return this.intersects(l.id)}containsPoint(l){return this.contains(t.S2CellId.fromPoint(l))}leafCellsCovered(){let s=new l(0);return this.cellIds.forEach(n=>{const c=t.S2CellId.MAX_LEVEL-n.level();s=s.add(new l(1).shiftLeft(c<<1))}),s}averageBasedArea(){return this.leafCellsCovered().mul(n.S2Projections.AVG_AREA.getValue(t.S2CellId.MAX_LEVEL)).toNumber()}approxArea(){let l=0;return this.cellIds.forEach(t=>{l+=new s.S2Cell(t).approxArea()}),l}exactArea(){let l=0;return this.cellIds.forEach(t=>{l+=new s.S2Cell(t).exactArea()}),l}normalize(){const l=[];return this.cellIds.sort((l,t)=>l.compareTo(t)),this.cellIds.forEach(t=>{let s=l.length;if(0===l.length||!l[s-1].contains(t)){for(;0!==l.length&&t.contains(l[l.length-1]);)l.splice(l.length-1,1);for(;l.length>=3&&(s=l.length,!l[s-3].id.xor(l[s-2].id).xor(l[s-1].id).notEquals(t.id));){let n=t.lowestOnBit().shiftLeft(1);n=n.add(n.shiftLeft(1)).not();const c=t.id.and(n);if(l[s-3].id.and(n).notEquals(c)||l[s-2].id.and(n).notEquals(c)||l[s-1].id.and(n).notEquals(c)||t.isFace())break;l.splice(s-3),t=t.parent()}l.push(t)}}),l.length<this.size()&&(this.initRawSwap(l),!0)}}}),"d6d466",["754175","aa68f0","ec227c","c9b1c7","9d200c","6acac6","f134ec","c9e4f2"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({compareItems:c,max:s}){const o=(0,u.useDebugLogger)('useCellBasedItemsCache',{background:'#d4e157',color:'#000'}),[f,h]=(0,t.useState)(),b=(0,t.useRef)(),p=(0,t.useRef)(new Map),C=(0,t.useRef)(new Map),v=(0,t.useCallback)((t,l)=>{o(()=>t+" is disposed from the cache"),l.itemKeys.forEach(l=>{const n=C.current.get(l);n&&(n.delete(t),0===n.size&&p.current.delete(l))})},[o]),k=(0,t.useRef)(new l.default({max:s,dispose:v,noDisposeOnSet:!0})),y=(0,t.useCallback)(()=>Array.from(k.current.keys()),[]),E=(0,t.useCallback)(()=>{o(()=>'Cache is manually cleared'),p.current.clear(),k.current.reset(),C.current.clear()},[o]),R=(0,t.useCallback)(({visibleCells:t,requiredCells:l})=>{if(null==t||0===t.length)return;l.forEach(t=>{k.current.get(t)});let u=t;null!=c&&(u=u.sort((t,l)=>{var n,u;const s=null===(n=k.current.peek(t))||void 0===n?void 0:n.itemKeys[0],o=null===(u=k.current.peek(l))||void 0===u?void 0:u.itemKeys[0];if(null==s||null==o)return 0;const f=p.current.get(s),h=p.current.get(o);return null==f||null==h?0:c(f,h)}));let s=[];return u.forEach(t=>{const l=k.current.peek(t);if(null!=l){var u;const{metadata:t}=l;(null==l||null===(u=l.itemKeys)||void 0===u?void 0:u.filter(n.default)).forEach(l=>{const n=p.current.get(l);null!=n&&s.push({item:n,metadata:t})})}}),s=s.reverse(),0!==s.length?s:void 0},[c]),w=(0,t.useCallback)(t=>{const l=R(t);null==t.requiredCells.find(t=>null==k.current.peek(t))||null!=l&&l.length>0?(b.current=l,h(l)):t.allowStale?h(b.current):h(l)},[R]),K=(0,t.useCallback)(({itemsDirectory:t,itemPlacementByCell:l,visibleCells:n,metadata:u})=>{n.forEach(t=>{k.current.get(t)}),Object.entries(t).forEach(([t,l])=>{p.current.set(t,l)}),Object.entries(l).forEach(([l,n])=>{k.current.set(l,{itemKeys:null==c?n:n.sort((l,n)=>{const u=t[l],s=t[n];return c(u,s)}),metadata:u}),n.forEach(t=>{const n=C.current.get(t);null!=n?n.add(l):C.current.set(t,new Set([l]))})}),o(()=>"LRU cache size is now "+k.current.length)},[c,o]);k.current.max!==s&&(o(()=>`LRU cache size changed from ${k.current.max} to ${s}`),k.current.max=s);return{updateCache:K,clearCache:E,getKnownCellTokens:y,items:f,regenerateItems:w}};var t=r(d[0]),l=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),u=r(d[3])}),"d9a9af",["d7ed8e","1e44bb","d89d24","e40e9b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S1Angle=void 0;class n{constructor(n){this.radians=n}degrees(){return 180*this.radians/Math.PI}static fromPoints(s,t){return new n(s.angle(t))}lessThan(n){return this.radians<n.radians}greaterThan(n){return this.radians>n.radians}lessOrEquals(n){return this.radians<=n.radians}greaterOrEquals(n){return this.radians>=n.radians}static max(n,s){return s.greaterThan(n)?s:n}static min(n,s){return s.greaterThan(n)?n:s}static radians(s){return new n(s)}static degrees(s){return new n(s*(Math.PI/180))}add(s){return new n(this.radians+s.radians)}sub(s){return new n(this.radians-s.radians)}mul(s){return new n(this.radians*s)}div(s){return new n(this.radians/s)}cos(){return Math.cos(this.radians)}sin(){return Math.sin(this.radians)}tan(){return Math.tan(this.radians)}distance(n){return this.radians*n}toString(){return this.degrees()+"d"}compareTo(n){return this.radians<n.radians?-1:this.radians>n.radians?1:0}equals(n){return 0===this.compareTo(n)}}e.S1Angle=n,n.INFINITY=new n(Number.POSITIVE_INFINITY),n.ZERO=new n(0)}),"dafb27",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2EdgeUtil=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]);e.S2EdgeUtil=class{static getDistance(o,c,l,u=n.S2.robustCrossProd(c,l)){if(n.S2.simpleCCW(u,c,o)&&n.S2.simpleCCW(o,l,u)){const t=Math.abs(o.dotProd(u))/u.norm();return new s.S1Angle(Math.asin(Math.min(1,t)))}const S=Math.min(t.S2Point.minus(o,c).norm2(),t.S2Point.minus(o,l).norm2());return new s.S1Angle(2*Math.asin(Math.min(1,.5*Math.sqrt(S))))}}}),"dd748e",["6acac6","e90871","dafb27"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0],"./MapsQueryV2-document.niobe").then(babelHelpers.interopRequireWildcard).then(t=>t.default),name:'MapsQueryV2',type:'query',operationId:'cfdd1c1db1c4e445856eeaf1548e16315f013d6af618d28f7cc49467e316718d'};e.default=t}),"df7d1e",["fa806a","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({debounceQueryInMS:v=50,mapContextName:q,mapBounds:I,mapCenter:M,mapSize:T,queriedPoiAcpId:w,hardLimitForPois:z=200,skip:P,poiCategoryTags:R,zoom:_}){var x,L;const A=(0,l.useRef)(void 0),[B,D]=(0,l.useState)(),[E,H]=(0,l.useState)(!1),N=(0,l.useRef)(500),{scheduler:Q,abort:F}=(0,o.usePostTaskScheduler)({priority:'background',strategy:'recycle'}),K=(0,l.useMemo)(()=>{const l=null==R?void 0:R.filter(n.default);if(null==l||0===l.length)return h},[R]),O=(0,l.useRef)(K),V=(0,l.useRef)(!1);K!==O.current&&(V.current=!0,O.current=K);const{updateCache:j,clearCache:G,getKnownCellTokens:J,items:U,regenerateItems:W}=(0,f.default)({compareItems:S,max:N.current}),X=(0,l.useCallback)(({visibleCells:l,requiredCells:t,allowStale:n})=>{W({zoom:_,mapBounds:I,mapCenter:M,mapSize:T,visibleCells:l,requiredCells:t,allowStale:n})},[W,_,I,M,T]),Y=(0,t().useNiobeMinimalistClient)(),Z=(0,l.useCallback)(({mapContextName:l,poiCategoryTags:t,queriedPoiAcpId:n,mapCellTokens:u})=>(H(!0),Y.query({query:c.default,variables:{request:{context:l,mapCellTokens:u,userQueriedAcpId:n,placeCategoryKgTags:t}},usePOSTForQuery:!0}).finally(()=>{H(!1)})),[Y]),$=(0,s.default)(async()=>{if(null==_||null==M||null==T||null==I)return;A.current=I;const l=V.current?h:J();let t=[],u=[];const o=Q.postTask(()=>{t=k({zoom:_,mapCenter:M,mapSize:T})}),s=Q.postTask(()=>{u=k({zoom:_,mapCenter:M,mapSize:T})});await o,await s;const c=t;N.current<t.length&&(N.current=Math.max(N.current,2*t.length));const p=new Set(l),C=Array.from(new Set(c)).filter(l=>!p.has(l)),f=0===C.length?h:C;if(P||E||0===f.length)X({visibleCells:u,requiredCells:c,allowStale:!0});else{t.length===c.length&&X({visibleCells:u,requiredCells:c,allowStale:!0}),Z({mapContextName:q,poiCategoryTags:R,queriedPoiAcpId:w,mapCellTokens:f}).then(l=>{var t;V.current&&(G(),V.current=!1);const{data:o}=l,s=null==o||null===(t=o.maps)||void 0===t?void 0:t.getMapCells;if(null==s)return;const{mapItemDirectory:p,mapItemPlacementByCell:C}=s;if(null==p||null==C)return;const f=p.filter(n.default).reduce((l,t)=>(l[t.key]=t.value,l),{}),v=C.filter(n.default).reduce((l,t)=>(l[t.key]=t.value.filter(n.default),l),{});var b,y,h;(j({itemsDirectory:f,itemPlacementByCell:v,visibleCells:u}),X({visibleCells:u,requiredCells:c,allowStale:!1}),null!=(null==l?void 0:l.data))&&D(null===(b=l.data)||void 0===b||null===(y=b.maps)||void 0===y||null===(h=y.getMapCells)||void 0===h?void 0:h.mapSearchId)})}},v);null==_||null==M||null==T||null==I||P||(0,b.nullableLatLngEqual)(null==I?void 0:I.sw,null===(x=A.current)||void 0===x?void 0:x.sw)&&(0,b.nullableLatLngEqual)(null==I?void 0:I.ne,null===(L=A.current)||void 0===L?void 0:L.ne)&&!V.current||$();const ee=(null==U?void 0:U.map(l=>l.item))||y,le=(0,l.useMemo)(()=>(0,p.normalizeMapResponseV2Items)(ee),[ee]),te=(0,l.useMemo)(()=>{const l=le.filter(l=>l.type===C.ProductType.PLACE);return l.length>z?((0,u.airdogCount)('map.maps_query_v2.items_over_hard_limit.event'),l.slice(0,z)):l},[le,z]);return(0,l.useEffect)(()=>()=>{F()},[F]),{loading:E,mapSearchId:B||void 0,placeContextItems:te}},e.getVisibleCells=k;var l=r(d[0]);function t(){const l=r(d[1]);return t=function(){return l},l}var n=babelHelpers.interopRequireDefault(r(d[2])),u=r(d[3]),o=r(d[4]),s=babelHelpers.interopRequireDefault(r(d[5])),c=babelHelpers.interopRequireDefault(r(d[6])),p=r(d[7]),C=r(d[8]),f=babelHelpers.interopRequireDefault(r(d[9])),v=r(d[10]),b=r(d[11]);const y=[],h=[];function S(l,t){return null!=l.score&&null!=t.score?l.score-t.score:0}function q(l){return t=l-4,n=2,u=17,Math.min(Math.max(t,n),u);var t,n,u}function k({zoom:l,mapCenter:t,mapSize:n}){const u=(0,b.calcMapBounds)(t,l,n);return(0,v.getSimpleCovering)({mapBounds:u,s2Level:q(l)})}}),"e04b36",["d7ed8e","1e513d","d89d24","08b665","c9055a","3b8d2c","df7d1e","7f44bd","bc3ba2","d9a9af","feac8d","f00eec"]);
__d((function(g,r,i,a,m,e,d){'use strict';var n=r(d[0]),t=new Float64Array(1),u=new Uint32Array(t.buffer);m.exports=function(f){return t[0]=f,u[n]}}),"e1885b",["2e854e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S1Interval=void 0;const t=r(d[0]),s=r(d[1]),h=r(d[2]);class n extends t.Interval{constructor(t,h,n=!1){super(t,h),n||(this.lo==-s.S2.M_PI&&this.hi!=s.S2.M_PI&&(this.lo=s.S2.M_PI),this.hi==-s.S2.M_PI&&this.lo!=s.S2.M_PI&&(this.hi=s.S2.M_PI))}isValid(){return Math.abs(this.lo)<=s.S2.M_PI&&Math.abs(this.hi)<=s.S2.M_PI&&!(this.lo==-s.S2.M_PI&&this.hi!=s.S2.M_PI)&&!(this.hi==-s.S2.M_PI&&this.lo!=s.S2.M_PI)}isFull(){return this.hi-this.lo==2*s.S2.M_PI}isEmpty(){return this.lo-this.hi==2*s.S2.M_PI}isInverted(){return this.lo>this.hi}getCenter(){const t=(this.lo+this.hi)/2;return this.isInverted()?t<=0?t+s.S2.M_PI:t-s.S2.M_PI:t}getLength(){let t=this.hi-this.lo;return t>=0?t:(t+=2*s.S2.M_PI,t>0?t:-1)}complement(){return this.lo==this.hi?n.full():new n(this.hi,this.lo,!0)}contains(t){let h=t;return h==-s.S2.M_PI&&(h=s.S2.M_PI),this.fastContains(h)}fastContains(t){const s=t;return this.isInverted()?(s>=this.lo||s<=this.hi)&&!this.isEmpty():s>=this.lo&&s<=this.hi}interiorContains(t){let h=t;return h==-s.S2.M_PI&&(h=s.S2.M_PI),this.isInverted()?h>this.lo||h<this.hi:h>this.lo&&h<this.hi||this.isFull()}containsI(t){return this.isInverted()?t.isInverted()?t.lo>=this.lo&&t.hi<=this.hi:(t.lo>=this.lo||t.hi<=this.hi)&&!this.isEmpty():t.isInverted()?this.isFull()||t.isEmpty():t.lo>=this.lo&&t.hi<=this.hi}interiorContainsI(t){return this.isInverted()?t.isInverted()?t.lo>this.lo&&t.hi<this.hi||t.isEmpty():this.lo>this.lo||t.hi<this.hi:t.isInverted()?this.isFull()||t.isEmpty():t.lo>this.lo&&t.hi<this.hi||this.isFull()}intersects(t){return!this.isEmpty()&&!t.isEmpty()&&(this.isInverted()?t.isInverted()||t.lo<=this.hi||t.hi>=this.lo:t.isInverted()?t.lo<=this.hi||t.hi>=this.lo:t.lo<=this.hi&&t.hi>=this.lo)}interiorIntersects(t){return!this.isEmpty()&&!t.isEmpty()&&this.lo!=this.hi&&(this.isInverted()?t.isInverted()||t.lo<this.hi||t.hi>this.lo:t.isInverted()?t.lo<this.hi||t.hi>this.lo:t.lo<this.hi&&t.hi>this.lo||this.isFull())}addPoint(t){let h=t;if(h==-s.S2.M_PI&&(h=s.S2.M_PI),this.fastContains(h))return new n(this.lo,this.hi);if(this.isEmpty())return n.fromPoint(h);return n.positiveDistance(h,this.lo)<n.positiveDistance(this.hi,h)?new n(h,this.hi):new n(this.lo,h)}expanded(t){if(this.isEmpty())return this;if(this.getLength()+2*t>=2*s.S2.M_PI-1e-15)return n.full();let o=h.Platform.IEEEremainder(this.lo-t,2*s.S2.M_PI);const l=h.Platform.IEEEremainder(this.hi+t,2*s.S2.M_PI);return o==-s.S2.M_PI&&(o=s.S2.M_PI),new n(o,l)}union(t){if(t.isEmpty())return this;if(this.fastContains(t.lo))return this.fastContains(t.hi)?this.containsI(t)?this:n.full():new n(this.lo,this.hi,!0);if(this.fastContains(t.hi))return new n(t.lo,this.hi,!0);if(this.isEmpty()||t.fastContains(this.lo))return t;return n.positiveDistance(t.hi,this.lo)<n.positiveDistance(this.hi,t.lo)?new n(t.lo,this.hi,!0):new n(this.lo,t.hi,!0)}intersection(t){return t.isEmpty()?n.empty():this.fastContains(t.lo)?this.fastContains(t.hi)?t.getLength()<this.getLength()?t:this:new n(t.lo,this.hi,!0):this.fastContains(t.hi)?new n(this.lo,t.hi,!0):t.fastContains(this.lo)?this:n.empty()}approxEquals(t,n=1e-9){return this.isEmpty()?t.getLength()<=n:t.isEmpty()?this.getLength()<=n:Math.abs(h.Platform.IEEEremainder(t.lo-this.lo,2*s.S2.M_PI))+Math.abs(h.Platform.IEEEremainder(t.hi-this.hi,2*s.S2.M_PI))<=n}static empty(){return new n(s.S2.M_PI,-s.S2.M_PI,!0)}static full(){return new n(-s.S2.M_PI,s.S2.M_PI,!0)}static fromPoint(t){let h=t;return h==-s.S2.M_PI&&(h=s.S2.M_PI),new n(h,h,!0)}static fromPointPair(t,h){let o=t,l=h;return o==-s.S2.M_PI&&(o=s.S2.M_PI),l==-s.S2.M_PI&&(l=s.S2.M_PI),n.positiveDistance(o,l)<=s.S2.M_PI?new n(o,l,!0):new n(l,o,!0)}static positiveDistance(t,h){const n=t,o=h-n;return o>=0?o:h+s.S2.M_PI-(n-s.S2.M_PI)}}e.S1Interval=n}),"e46169",["466476","e90871","256d77"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({debounceQueryInMS:f=300,mapContextName:I,ne_lat:v,ne_lng:P,queriedPoiAcpId:y,queriedPoiPlaceId:M,selectTopNPois:b=Number.POSITIVE_INFINITY,skip:C,sw_lat:T,sw_lng:_,zoom:q,poiCategoryTags:x}){var E,R;const N=(0,t.useMemo)(()=>({context:I,locationBounds:{boundingBox:{southwest:{lat:T,lng:_},northeast:{lat:v,lng:P}}},queriedPoiAcpId:y,queriedPoiPlaceId:M,zoomLevel:q,categoryTags:x}),[I,T,_,v,P,y,M,q,x]),S=(0,l.default)(N,f,!1),A={variables:{request:S},skip:C||!S},{data:h,loading:w}=(0,o().useMinimalistClientSideQuery)(u.default,A),z=(null==h||null===(E=h.maps)||void 0===E||null===(R=E.getMap)||void 0===R?void 0:R.mapSearchId)||void 0,D=(0,t.useMemo)(()=>{var t,o,l;return(null==h||null===(t=h.maps)||void 0===t||null===(o=t.getMap)||void 0===o||null===(l=o.content)||void 0===l?void 0:l.filter(n.default))||c},[h]),H=(0,t.useMemo)(()=>(0,s.normalizeMapResponseItems)(D),[D]),L=(0,t.useMemo)(()=>H.filter(t=>t.type===p.ProductType.STAY),[H]),k=(0,t.useMemo)(()=>H.filter(t=>t.type===p.ProductType.PLACE).slice(0,b),[H,b]),B=(0,t.useMemo)(()=>H.filter(t=>t.type===p.ProductType.EXPERIENCE),[H]),O=(0,t.useMemo)(()=>{let t=0;return D.filter(o=>'PLACE'!==o.type||(t+=1,t<=b))},[D,b]);return{firstResponseReceived:!!h,items:O,loading:w,mapSearchId:z,stayContextItems:L,placeContextItems:k,experienceContextItems:B}};var t=r(d[0]);function o(){const t=r(d[1]);return o=function(){return t},t}var l=babelHelpers.interopRequireDefault(r(d[2])),n=babelHelpers.interopRequireDefault(r(d[3])),u=babelHelpers.interopRequireDefault(r(d[4])),s=r(d[5]),p=r(d[6]);const c=[]}),"e6cc5e",["d7ed8e","1e513d","f5c5d1","d89d24","f2e18c","7f44bd","bc3ba2"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=babelHelpers.interopRequireDefault(r(d[0])),o=babelHelpers.interopRequireDefault(r(d[1])),n=babelHelpers.interopRequireDefault(r(d[2])),s=babelHelpers.interopRequireDefault(r(d[3])),t=babelHelpers.interopRequireDefault(r(d[4])),b=r(d[5]),u=r(d[6]);var f=l.default.memo(({ariaLabel:l,booked:f,color:c,backgroundColor:p,containerRef:v,contrast:I,fadeIn:h,fadeInDelayInMs:k,hasBorder:C,href:O,inverse:R,isActive:w,isHighlighted:D,labelIsVisible:H,labelPosition:M,labelRef:x,labelSubTitle:S,labelTitle:T,name:j,numOfOverlapped:q,numOfVisitedOverlapped:z,onBlur:B,onFocus:P,onMouseEnter:L,onMouseLeave:N,onPress:V,openInNewWindow:_,saved:y,size:A,icon:F,visited:E,preferNewIcon:W=!1})=>(0,u.jsx)(n.default,{booked:f,contrast:I,inverse:R,isActive:w,isHighlighted:D,saved:y,visited:E,children:({color:n,backgroundColor:f,backgroundImage:I,boxShadow:R,labelTitleColor:E,badgeFillColor:U,badgeStrokeColor:G})=>(0,u.jsx)(s.default,{ariaLabel:l,backgroundColor:p||f,backgroundImage:I,boxShadow:R,color:c||n,containerRef:v,fadeIn:h,fadeInDelayInMs:k,hasBorder:C,href:O,isActive:w,labelIsVisible:H,labelPosition:M,labelRef:x,labelSubTitle:S,labelTitle:T,labelTitleColor:E,numOfOverlapped:q,numOfVisitedOverlapped:z,onBlur:B,onFocus:P,onMouseEnter:L,onMouseLeave:N,onPress:V,openInNewWindow:_,scaledUp:w||D,size:A,badge:y?(0,u.jsx)(t.default,{size:(0,b.getBadgeSize)(A),fillColor:U,strokeColor:G}):void 0,children:(0,u.jsx)(o.default,{icon:F,preferNewIcon:W,name:j,size:A})})}));e.default=f}),"e85a01",["d7ed8e","701727","f78380","6b99de","41a7b5","f9bd41","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2Metric=e.S2=void 0;const t=r(d[0]),o=r(d[1]);Object.defineProperty(e,"S2Metric",{enumerable:!0,get:function(){return o.S2Metric}});const n=r(d[2]),s=r(d[3]);class P{static IEEEremainder(t,o){return n.Platform.IEEEremainder(t,o)}static isUnitLength(t){return Math.abs(t.norm2()-1)<=1e-15}static exp(t){return n.Platform.getExponent(t)}static robustCrossProd(o,n){const s=t.S2Point.crossProd(t.S2Point.add(n,o),t.S2Point.sub(n,o));return s.equals(new t.S2Point(0,0,0))?o.ortho():s}static area(t,o,n){const s=o.angle(n),c=n.angle(t),M=t.angle(o),u=s+c+.5*M;if(u>=3e-4){const S=2*u,E=u-Math.max(s,c,M);if(E<S*S*u*.01){const s=P.girardArea(t,o,n);if(E<u*(.1*s))return s}}return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(.5*u)*Math.tan(u-.5*s)*Math.tan(u-.5*c)*Math.tan(u-.5*M))))}static girardArea(o,n,s){const P=t.S2Point.crossProd(o,n),c=t.S2Point.crossProd(n,s),M=t.S2Point.crossProd(o,s);return Math.max(0,P.angle(M)-P.angle(c)+c.angle(M))}static simpleCCW(o,n,s){return t.S2Point.crossProd(s,o).dotProd(n)>0}static simpleCrossing(o,n,s,P){const c=t.S2Point.crossProd(o,n),M=t.S2Point.crossProd(s,P),u=-1*c.dotProd(s),S=-1*M.dotProd(n),E=c.dotProd(P),_=M.dotProd(o);return u*S>0&&S*E>0&&E*_>0}static approxEqualsPointError(t,o,n){return t.angle(o)<=n}static approxEqualsPoint(t,o){return this.approxEqualsPointError(t,o,1e-15)}static approxEqualsNumberError(t,o,n){return Math.abs(t-o)<=n}static approxEqualsNumber(t,o){return this.approxEqualsNumberError(t,o,1e-15)}}e.S2=P,P.M_PI=Math.PI,P.M_1_PI=1/Math.PI,P.M_PI_2=Math.PI/2,P.M_PI_4=Math.PI/4,P.M_SQRT2=Math.sqrt(2),P.M_E=Math.E,P.SWAP_MASK=1,P.INVERT_MASK=2,P.EXPONENT_SHIFT=52,P.EXPONENT_MASK=s.fromString('0x7ff0000000000000',!0,16),P.POS_TO_ORIENTATION=[P.SWAP_MASK,0,0,P.INVERT_MASK+P.SWAP_MASK],P.DBL_EPSILON=2*Number.EPSILON,P.POS_TO_IJ=[[0,1,3,2],[0,2,3,1],[3,2,0,1],[3,1,0,2]],P.MAX_LEVEL=30,P.Metric=o.S2Metric}),"e90871",["6acac6","317001","256d77","754175"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2Cell=void 0;const t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=r(d[4]),c=r(d[5]),h=r(d[6]),S=r(d[7]),_=r(d[8]),u=r(d[9]);class P{constructor(t){this.cellID=t,null!=t&&this.init(t)}get id(){return this.cellID}static fromFace(t){return new P(n.S2CellId.fromFace(t))}static fromFacePosLevel(s,o,l){return new P(n.S2CellId.fromFacePosLevel(s,new t(o),l))}static fromPoint(t){return new P(n.S2CellId.fromPoint(t))}static fromLatLng(t){return new P(n.S2CellId.fromPoint(t.toPoint()))}isLeaf(){return this._level==n.S2CellId.MAX_LEVEL}getVertex(t){return s.S2Point.normalize(this.getVertexRaw(t))}getVertexRaw(t){return l.S2Projections.faceUvToXyz(this._face,0==(t>>1^1&t)?this.uMin:this.uMax,t>>1==0?this.vMin:this.vMax)}getEdge(t){return s.S2Point.normalize(this.getEdgeRaw(t))}getEdgeRaw(t){switch(t){case 0:return l.S2Projections.getVNorm(this._face,this.vMin);case 1:return l.S2Projections.getUNorm(this._face,this.uMax);case 2:return s.S2Point.neg(l.S2Projections.getVNorm(this._face,this.vMax));default:return s.S2Point.neg(l.S2Projections.getUNorm(this._face,this.uMin))}}subdivide(){if(this.id.isLeaf())return null;const t=new Array(4);for(let n=0;n<4;++n)t[n]=new P;let n=this.id.childBegin();const s=this.getCenterUV(),o=s.x,l=s.y;for(let s=0;s<4;++s,n=n.next()){const h=t[s];h._face=this.face,h._level=this.level+1,h._orientation=this.orientation^c.S2.POS_TO_ORIENTATION[s],h.cellID=n;const S=c.S2.POS_TO_IJ[this.orientation][s];0!=(2&S)?(h.uMin=o,h.uMax=this.uMax):(h.uMin=this.uMin,h.uMax=o),0!=(1&S)?(h.vMin=l,h.vMax=this.vMax):(h.vMin=this.vMin,h.vMax=l)}return t}getCenter(){return s.S2Point.normalize(this.getCenterRaw())}getCenterRaw(){return this.cellID.toPointRaw()}getCenterUV(){return this.cellID.getCenterUV()}static averageArea(t){return l.S2Projections.AVG_AREA.getValue(t)}averageArea(){return l.S2Projections.AVG_AREA.getValue(this._level)}approxArea(){if(this._level<2)return this.averageArea();const t=.5*s.S2Point.crossProd(s.S2Point.sub(this.getVertex(2),this.getVertex(0)),s.S2Point.sub(this.getVertex(3),this.getVertex(1))).norm();return 2*t/(Math.sqrt(-1*Math.min(t*c.S2.M_1_PI,1)+1)+1)}exactArea(){const t=this.getVertex(0),n=this.getVertex(1),s=this.getVertex(2),o=this.getVertex(3);return c.S2.area(t,n,s)+c.S2.area(t,s,o)}getCapBound(){const t=this.getCenterUV(),n=s.S2Point.normalize(l.S2Projections.faceUvToXyz(this._face,t.x,t.y));let o=u.S2Cap.fromAxisHeight(n,0);for(let t=0;t<4;++t)o=o.addPoint(this.getVertex(t));return o}getPoint(t,n){return l.S2Projections.faceUvToXyz(this._face,0==t?this.uMin:this.uMax,0==n?this.vMin:this.vMax)}getRectBound(){if(this._level>0){const t=this.uMin+this.uMax,n=this.vMin+this.vMax,s=0==l.S2Projections.getUAxis(this._face).z?t<0?1:0:t>0?1:0,u=0==l.S2Projections.getVAxis(this._face).z?n<0?1:0:n>0?1:0,P=S.R1Interval.fromPointPair(o.S2LatLng.latitude(this.getPoint(s,u)).radians,o.S2LatLng.latitude(this.getPoint(1-s,1-u)).radians),M=_.S1Interval.fromPointPair(o.S2LatLng.longitude(this.getPoint(s,1-u)).radians,o.S2LatLng.longitude(this.getPoint(1-s,u)).radians);return new h.S2LatLngRect(P,M).expanded(o.S2LatLng.fromRadians(c.S2.DBL_EPSILON,c.S2.DBL_EPSILON)).polarClosure()}switch(this._face){case 0:return new h.S2LatLngRect(new S.R1Interval(-c.S2.M_PI_4,c.S2.M_PI_4),new _.S1Interval(-c.S2.M_PI_4,c.S2.M_PI_4));case 1:return new h.S2LatLngRect(new S.R1Interval(-c.S2.M_PI_4,c.S2.M_PI_4),new _.S1Interval(c.S2.M_PI_4,3*c.S2.M_PI_4));case 2:return new h.S2LatLngRect(new S.R1Interval(P.POLE_MIN_LAT,c.S2.M_PI_2),new _.S1Interval(-c.S2.M_PI,c.S2.M_PI));case 3:return new h.S2LatLngRect(new S.R1Interval(-c.S2.M_PI_4,c.S2.M_PI_4),new _.S1Interval(3*c.S2.M_PI_4,-3*c.S2.M_PI_4));case 4:return new h.S2LatLngRect(new S.R1Interval(-c.S2.M_PI_4,c.S2.M_PI_4),new _.S1Interval(-3*c.S2.M_PI_4,-c.S2.M_PI_4));default:return new h.S2LatLngRect(new S.R1Interval(-c.S2.M_PI_2,-P.POLE_MIN_LAT),new _.S1Interval(-c.S2.M_PI,c.S2.M_PI))}}mayIntersectC(t){return this.cellID.intersects(t.cellID)}contains(t){const n=l.S2Projections.faceXyzToUv(this._face,t);return null!=n&&(n.x>=this.uMin&&n.x<=this.uMax&&n.y>=this.vMin&&n.y<=this.vMax)}containsC(t){return this.cellID.contains(t.cellID)}init(t){this.cellID=t,this._face=t.face;const s=t.toIJOrientation();this._orientation=n.S2CellId.getOrientation(s),this._level=t.level();const o=n.S2CellId.getI(s),c=n.S2CellId.getJ(s),h=t.getSizeIJ();this.uMin=l.S2Projections.ijToUV(o,h),this.uMax=l.S2Projections.ijToUV(o+h,h),this.vMin=l.S2Projections.ijToUV(c,h),this.vMax=l.S2Projections.ijToUV(c+h,h)}get face(){return this._face}get orientation(){return this._orientation}get level(){return this._level}toString(){return"["+this._face+", "+this._level+", "+this.orientation+", "+this.cellID+"]"}toGEOJSON(){return{type:'Feature',geometry:{type:'Polygon',coordinates:[[this.getVertex(0),this.getVertex(1),this.getVertex(2),this.getVertex(3),this.getVertex(0)].map(t=>o.S2LatLng.fromPoint(t)).map(t=>[t.lngDegrees,t.latDegrees])]},properties:{},title:`Cell: ${this.id.toToken()} lvl: ${this._level}`}}}e.S2Cell=P,P.MAX_CELL_SIZE=1<<n.S2CellId.MAX_LEVEL,P.MAX_ERROR=1/new t(1).shiftLeft(51).toNumber(),P.POLE_MIN_LAT=Math.asin(Math.sqrt(.3333333333333333))-P.MAX_ERROR}),"ec227c",["754175","aa68f0","6acac6","166121","c9b1c7","e90871","9d200c","4aaf2d","e46169","f134ec"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({zoom:u,mapBounds:s,mapCenter:p,mapSize:v,cachedCells:c}){const z=new Set(c),C=(function({zoom:o,mapBounds:u}){if(null==u||null==o)return t;return(0,n.getSimpleCovering)({mapBounds:u,s2Level:(0,l.zoomToS2Level)(o)})})({zoom:u,mapBounds:s}),S=(function({zoom:u,mapCenter:s,mapSize:p}){if(null==s||null==p||null==u||null==p)return t;const v=Math.max(u-1,2),c=Math.min(u+1,18),z=(0,o.calcMapBounds)(s,v,p),C=(0,o.calcMapBounds)(s,c,p),S=(0,n.getSimpleCovering)({mapBounds:z,s2Level:(0,l.zoomToS2Level)(v)}),f=(0,n.getSimpleCovering)({mapBounds:C,s2Level:(0,l.zoomToS2Level)(c)});return[...(0,n.getSimpleCovering)({mapBounds:z,s2Level:(0,l.zoomToS2Level)(u)}),...S,...f]})({zoom:u,mapCenter:p,mapSize:v});if(S.filter(o=>!z.has(o)).length/S.length>.3)return{mustHaveCells:C,goodToHaveCells:S};return{mustHaveCells:C,goodToHaveCells:t}};var o=r(d[0]),n=r(d[1]),l=r(d[2]);const t=[]}),"ec6abc",["f00eec","afee13","bbcb45"]);
__d((function(g,r,i,a,m,e,d){"use strict";'pseudomap'===process.env.npm_package_name&&'test'===process.env.npm_lifecycle_script&&(process.env.TEST_PSEUDOMAP='true'),'function'!=typeof Map||process.env.TEST_PSEUDOMAP?m.exports=r(d[0]):m.exports=Map}),"ef0f12",["194f7a"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=Object.create?function(t,o,n,c){void 0===c&&(c=n);var s=Object.getOwnPropertyDescriptor(o,n);s&&!("get"in s?!o.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return o[n]}}),Object.defineProperty(t,c,s)}:function(t,o,n,c){void 0===c&&(c=n),t[c]=o[n]},o=function(o,n){for(var c in o)"default"===c||Object.prototype.hasOwnProperty.call(n,c)||t(n,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;const n=r(d[0]);o(r(d[1]),e),o(r(d[2]),e),o(r(d[3]),e),o(r(d[4]),e),o(r(d[5]),e),o(r(d[6]),e),o(r(d[7]),e),o(r(d[0]),e),o(r(d[8]),e),o(r(d[9]),e),o(r(d[10]),e),o(r(d[11]),e),o(r(d[12]),e),o(r(d[13]),e),o(r(d[14]),e),o(r(d[15]),e),o(r(d[16]),e);e.Utils=class{static calcRegionFromCenterRadius(t,o,c=16){const s=t.pointsAtDistance(o,c);let u=n.S2Cap.empty().addPoint(t.toPoint());return s.map(t=>t.toPoint()).forEach(t=>{u=u.addPoint(t)}),u}}}),"ef9cac",["f134ec","466476","1d951c","4aaf2d","f1ee27","dafb27","e46169","e90871","ec227c","aa68f0","d6d466","166121","9d200c","6acac6","c9b1c7","1a8948","3f5faa"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.S2Cap=void 0;const t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),h=r(d[4]),u=r(d[5]),l=r(d[6]),S=r(d[7]),c=r(d[8]),f=r(d[9]);class A{constructor(t,s){this.axis=t,this.radius=s}static fromAxisChord(t,s){return new A(t,s)}static fromAxisHeight(t,s){return new A(t,S.S1ChordAngle.fromLength2(2*s))}static fromAxisAngle(s,o){return this.fromAxisChord(s,S.S1ChordAngle.fromS1Angle(n.S1Angle.radians(Math.min(o.radians,t.S2.M_PI))))}static fromAxisArea(s,n){return new A(s,S.S1ChordAngle.fromLength2(n/t.S2.M_PI))}static empty(){return new A(s.S2Point.X_POS,S.S1ChordAngle.NEGATIVE)}static full(){return new A(s.S2Point.X_POS,S.S1ChordAngle.STRAIGHT)}getCapBound(){return this}height(){return.5*this.radius.getLength2()}area(){return 2*t.S2.M_PI*Math.max(0,this.height())}angle(){return this.radius.toAngle()}isValid(){return t.S2.isUnitLength(this.axis)&&this.radius.getLength2()<=4}isEmpty(){return this.radius.isNegative()}isFull(){return S.S1ChordAngle.STRAIGHT.equals(this.radius)}complement(){return this.isFull()?A.empty():this.isEmpty()?A.full():A.fromAxisChord(s.S2Point.neg(this.axis),S.S1ChordAngle.fromLength2(4-this.radius.getLength2()))}containsCap(t){if(this.isFull()||t.isEmpty())return!0;{const s=S.S1ChordAngle.fromS2Point(this.axis,t.axis);return this.radius.compareTo(S.S1ChordAngle.add(s,t.radius))>=0}}interiorIntersects(t){return!this.complement().containsCap(t)}interiorContains(t){return this.isFull()||S.S1ChordAngle.fromS2Point(this.axis,t).compareTo(this.radius)<0}addPoint(t){return this.isEmpty()?new A(t,S.S1ChordAngle.ZERO):new A(this.axis,S.S1ChordAngle.fromLength2(Math.max(this.radius.getLength2(),this.axis.getDistance2(t))))}addCap(s){if(this.isEmpty())return s;if(s.isEmpty())return this;{const n=S.S1ChordAngle.add(S.S1ChordAngle.fromS2Point(this.axis,s.axis),s.radius),o=n.plusError(t.S2.DBL_EPSILON*n.getLength2());return new A(this.axis,S.S1ChordAngle.max(this.radius,o))}}getRectBound(){if(this.isEmpty())return o.S2LatLngRect.empty();if(this.isFull())return o.S2LatLngRect.full();const s=h.S2LatLng.fromPoint(this.axis),n=this.angle().radians;let f=!1;const A=[],P=[];if(P[0]=-t.S2.M_PI,P[1]=t.S2.M_PI,A[0]=s.lat().radians-n,A[0]<=-t.S2.M_PI_2&&(A[0]=-t.S2.M_PI_2,f=!0),A[1]=s.lat().radians+n,A[1]>=t.S2.M_PI_2&&(A[1]=t.S2.M_PI_2,f=!0),!f){const n=S.S1ChordAngle.sin(this.radius),o=Math.cos(s.lat().radians);if(n<=o){const h=Math.asin(n/o);P[0]=c.Platform.IEEEremainder(s.lng().radians-h,2*t.S2.M_PI),P[1]=c.Platform.IEEEremainder(s.lng().radians+h,2*t.S2.M_PI)}}return new o.S2LatLngRect(new u.R1Interval(A[0],A[1]),new l.S1Interval(P[0],P[1]))}mayIntersectC(t){const s=new Array(4);for(let n=0;n<4;++n)if(s[n]=t.getVertex(n),this.contains(s[n]))return!0;return this.intersects(t,s)}intersects(t,n){if(this.radius.compareTo(S.S1ChordAngle.RIGHT)>=0)return!1;if(this.isEmpty())return!1;if(t.contains(this.axis))return!0;const o=S.S1ChordAngle.sin2(this.radius);for(let h=0;h<4;++h){const u=t.getEdgeRaw(h),l=this.axis.dotProd(u);if(l>0)continue;if(l*l>o*u.norm2())return!1;const S=s.S2Point.crossProd(u,this.axis);if(S.dotProd(n[h])<0&&S.dotProd(n[h+1&3])>0)return!0}return!1}contains(t){return S.S1ChordAngle.fromS2Point(this.axis,t).compareTo(this.radius)<=0}containsC(t){const s=[];for(let n=0;n<4;++n)if(s[n]=t.getVertex(n),!this.contains(s[n]))return!1;return!this.complement().intersects(t,s)}approxEquals(s,n=1e-14){const o=this.radius.getLength2(),h=s.radius.getLength2();return t.S2.approxEqualsPointError(this.axis,s.axis,n)&&Math.abs(o-h)<=n||this.isEmpty()&&h<=n||s.isEmpty()&&o<=n||this.isFull()&&h>=2-n||s.isFull()&&o>=2-n}toString(){return"[Point = "+this.axis+" Radius = "+this.radius+"]"}toGEOJSON(){return this.getRectBound().toGEOJSON()}}e.S2Cap=A,A.ROUND_UP=1/new f(1).shiftLeft(52).toNumber()+1}),"f134ec",["e90871","6acac6","dafb27","9d200c","166121","4aaf2d","e46169","c9e4f2","256d77","754175"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.R2Vector=void 0;const t=r(d[0]);class s{constructor(t,s){this._x=t,this._y=s}get x(){return this._x}get y(){return this._y}get(t){if(t<0||t>1)throw new Error("Index out fo bounds error "+t);return 0==t?this._x:this._y}static fromPointFace(t,s){return t.toR2Vector(s)}static add(t,n){return new s(t._x+n._x,t._y+n._y)}static mul(t,n){return new s(n*t._x,n*t._y)}norm2(){return this.x*this.x+this.y*this.y}static dotProd(t,s){return t.x*s.x+t.y*s.y}dotProd(t){return s.dotProd(this,t)}crossProd(t){return this.x*t.y-this.y*t.x}lessThan(t){return this.x<t.x||!(t.x<this.x)&&this.y<t.y}static fromSTVector(t){return new s(s.singleStTOUV(t.x),s.singleStTOUV(t.y))}static singleStTOUV(t){return t>=.5?.3333333333333333*(4*t*t-1):.3333333333333333*(1-4*(1-t)*(1-t))}static singleUVToST(t){return t>=0?.5*Math.sqrt(1+3*t):1-.5*Math.sqrt(1-3*t)}toPoint(s){switch(s){case 0:return new t.S2Point(1,this.x,this.y);case 1:return new t.S2Point(-1*this.x,1,this.y);case 2:return new t.S2Point(-1*this.x,-1*this.y,1);case 3:return new t.S2Point(-1,-1*this.y,-1*this.x);case 4:return new t.S2Point(this.y,-1,-1*this.x);default:return new t.S2Point(this.y,this.x,-1)}}toSt(t){return 0==t?s.singleUVToST(this.x):s.singleUVToST(this.y)}toString(){return"("+this.x.toString()+", "+this.y.toString()+")"}}e.R2Vector=s}),"f1ee27",["6acac6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={document:void 0,getDocument:()=>r(d[1])(d[0],"./MapsQuery-document.niobe").then(babelHelpers.interopRequireWildcard).then(t=>t.default),name:'MapsQuery',type:'query',operationId:'2bd5f00fad49cdab91fce6bfa38db32f392b2d31177f74a09e5b2b75831c414f'};e.default=t}),"f2e18c",["03c377","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n,o=!0){const[c,s]=(0,t.useState)(o?u:void 0);return(0,t.useEffect)(()=>{const t=setTimeout(()=>{s(u)},n);return()=>{clearTimeout(t)}},[u,n]),c};var t=r(d[0])}),"f5c5d1",["d7ed8e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkState=e.checkArgument=void 0,e.checkArgument=function(t,c){if(!t)throw Error('IllegalArgumentException: '+(c||''))},e.checkState=function(t,c){if(!t)throw Error('IllegalStateException: '+(c||''))}}),"fdf600",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getCells",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"getSimpleCovering",{enumerable:!0,get:function(){return n.getSimpleCovering}}),Object.defineProperty(e,"zoomToS2Level",{enumerable:!0,get:function(){return o.zoomToS2Level}});var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]),o=r(d[2])}),"feac8d",["ec6abc","afee13","bbcb45"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/0802.c50ae7e60d.js.map
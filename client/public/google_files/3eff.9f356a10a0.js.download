__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getApolloClientConstructor=void 0,e.useNiobeApolloClient=function({skip:f=!1,context:v}={}){var b,A;f||(0,n.collectAsyncChunks)(c().niobeApolloClientLoader,v);const{niobeApolloClient:x}=(0,t.useContext)(o.HyperloopProvidedContext),{niobeApolloClientData:y=(null===(b=(0,C().getState)())||void 0===b?void 0:b.niobeApolloClientData)}=(0,t.useContext)(l.HyperloopPropsContext),{niobeApolloClient:_}=null!==(A=(0,t.useContext)(u().NiobeClientReactContext))&&void 0!==A?A:{},[D,H]=(0,t.useState)(()=>{var t;return null!==(t=null!=x?x:_)&&void 0!==t?t:p.value&&(0,s().default)(p.value,y)});return(0,t.useEffect)(()=>{let t=!0;return D||f||p().then(n=>{t&&H((0,s().default)(n,y))}),()=>{t=!1}},[]),D};var t=r(d[0]),n=r(d[1]),o=r(d[2]),l=r(d[3]);function u(){const t=r(d[4]);return u=function(){return t},t}function c(){const t=r(d[5]);return c=function(){return t},t}function s(){const t=babelHelpers.interopRequireDefault(r(d[6]));return s=function(){return t},t}function C(){const t=r(d[7]);return C=function(){return t},t}const p=async()=>{const t=await(0,c().niobeApolloClientLoader)();return p.value=t,t};e.getApolloClientConstructor=p}),"1638e7",["d7ed8e","4b7bbf","a9b978","f1bcbf","8915ba","352233","2d9116","c8a8e0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KRAKEN_TEST_DESTINATIONS_HEADER=void 0;e.KRAKEN_TEST_DESTINATIONS_HEADER='X-Kraken-Test-Destinations'}),"2152b5",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWebSocketGatewayURL=function({hostname:t,port:n}){if('2450'===n)return;if(!t)return;if('localhost.airbnb.com'===t)return new URL("wss://ws.localhost.airbnb.com/ws/");if('staging.airbnb.com'===t)return new URL("wss://ws.staging.airbnb.com/ws/");if(t.endsWith('.localhost.airbnb.tools'))return new URL("wss://ws.localhost.airbnb.tools/ws/");if(t.endsWith('.airbnb.tools'))return new URL(`wss://${t}/ws/`);const o=t.startsWith('airbnb.')?0:t.lastIndexOf('.airbnb.')+1;if(-1===o)return;const b=t.slice(o);return'airbnb.tools'===b||b in s.default?new URL(`wss://ws.${b}/ws/`):void 0};var s=babelHelpers.interopRequireDefault(r(d[0]))}),"26daec",["feaf65"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=babelHelpers.interopRequireDefault(r(d[0]));return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,u){const o=(0,t().default)(window);return new n({apiGatewayURL:'',data:u,...o})}}),"2d9116",["93f7b2"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,u){return u}}),"2f14a2",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClientMessageEvent=void 0;var t={defaultProps:{schema:'com.airbnb.jitney.event.logging.WebSocketClient:WebSocketClientMessageEvent:1.0.0',event_name:'websocketclient_message'},propTypes:{}};e.WebSocketClientMessageEvent=t,t.fullyQualifiedName='WebSocketClient.v1.WebSocketClientMessageEvent'}),"2f1f8d",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClientConnectionResultEvent=void 0;var t={defaultProps:{schema:'com.airbnb.jitney.event.logging.WebSocketClient:WebSocketClientConnectionResultEvent:2.0.0',event_name:'websocketclient_connection_result'},propTypes:{}};e.WebSocketClientConnectionResultEvent=t,t.fullyQualifiedName='WebSocketClient.v2.WebSocketClientConnectionResultEvent'}),"31fe9f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.niobeMinimalistClientLoader=e.niobeApolloClientLoader=void 0;var o=r(d[0]);const l=(0,o.normalizeLoader)(()=>r(d[2])(d[1],"./apollo/core").then(babelHelpers.interopRequireWildcard));e.niobeApolloClientLoader=l;const n=(0,o.normalizeLoader)(()=>r(d[2])(d[3],"./minimalist").then(babelHelpers.interopRequireWildcard));e.niobeMinimalistClientLoader=n}),"352233",["4b299b","1da8ab","b8ad06","a273f6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.API_KEY=void 0;e.API_KEY='d306zoyjsyarp7ifhu67rjxn52tv0t20'}),"3604b7",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,n){const l=(0,t.default)(u,n);if(l&&l[0])return l[0];return null};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"40ae24",["e3e714"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.createPendingOpenWebSocketConnection=void 0;const o={wasClean:!1,code:-1,reason:'Unexpected (impossible) error'};function c(t,n,c,l,p,S=1,b="*"){const{abortSignal:k,connectionId:w}=t;return{state:'established',connectionId:w,webSocketUrl:n,next:c().then(S=>{switch(S.type){case'close':{const o=f(t,p,S);return y(o,k)?s(t,S,b,p,o):u(w,n,S,b)}case'message':{const{data:b}=S;try{if('type'in b&&'MESSAGE'===b.type){var h;const S=null===(h=b.payload)||void 0===h?void 0:h.length;return(function t(n,c,l,p,S,b,k){const{abortSignal:w,connectionId:h}=n;k.requireMessageAck&&p({type:'MESSAGE_ACK',payload:S.messageOffset});return{state:'message',connectionId:h,webSocketUrl:c,next:l().then(b=>{const C=S.messageOffset;switch(b.type){case'close':{const t=f(n,k,b);return y(t,w)?s(n,b,C,k,t):u(h,c,b,C)}case'message':try{const{data:o}=b;if('type'in o&&'MESSAGE'===o.type)return t(n,c,l,p,o,o.payload.length,k)}catch(t){}default:return u(h,c,o,C)}}),lastMessage:S,payloadSize:b,serverDrivenConfig:k}})(t,n,c,l,b,S,p)}}catch(t){}}default:return u(w,n,o,b)}}),attemptCount:S,serverDrivenConfig:p}}function s(t,p,S,b,k,w=1){const{webSocketGatewayURL:h,protocols:C,connectionId:v,abortSignal:P,createTimeoutPromise:E,createRetryPromise:I,WebSocket:x}=t,U=l(h,v,S);return{state:'reconnecting',connectionId:v,webSocketUrl:U,next:I(k,w).then(async()=>{const{getNextWebSocketEvent:l,writeWebSocketEvent:p}=(0,n().createWebSocketEventGetter)(U,C,x,P),k=E(),h=await Promise.race([l(),k]);switch(h.type){case'open':return Promise.race([l(),k]).then(n=>{if('close'===n.type)return u(v,U,n,S,w);if('message'===n.type){const{data:o}=n;try{if('clientConnectionPolicy'in o)return c(t,U,l,p,o.clientConnectionPolicy,w,S)}catch(t){}}return u(v,U,o,S,w)});case'timeout':case'close':{const n=f(t,b,h),o=w+1;return y(n,P,o)?s(t,h,S,b,n,o):u(v,U,h,S,w)}default:return u(v,U,o,S,w)}}),attemptCount:w,serverDrivenConfig:b,sourceError:p}}function u(t,n,o,c,s=1){return{state:'disconnected',connectionId:t,webSocketUrl:n,next:null,attemptCount:s,sourceError:o,messageOffset:c}}function l(n,o,c){const s=new URL(n),{searchParams:u}=s;return u.set('connection_id',o),u.set('key',t().API_KEY),c&&u.set('msg_offset',c),s}function f(t,n,{code:o}){return n.closeConfigs.find(t=>t.closeStatusCode===o)||t.defaultCloseConfig}function y(t,{aborted:n},o=1){return o<=t.clientRetryStrategy.maxRetryAttempts&&!n&&t.reconnectable}e.createPendingOpenWebSocketConnection=t=>{const{connectionId:s,webSocketGatewayURL:f,protocols:y,abortSignal:p,createTimeoutPromise:S,WebSocket:b}=t,k=l(f,s),{getNextWebSocketEvent:w,writeWebSocketEvent:h}=(0,n().createWebSocketEventGetter)(k,y,b,p),C=S();return{state:'pending-open',connectionId:s,webSocketUrl:k,next:Promise.race([w(),C]).then(n=>{switch(n.type){case'open':return(function(t,n,s,l,f){const{connectionId:y}=t;return{state:'pending-config',connectionId:y,webSocketUrl:n,next:Promise.race([s(),f]).then(f=>{if('close'===f.type)return u(y,n,f);if('message'===f.type){const{data:o}=f;try{if('clientConnectionPolicy'in o)return c(t,n,s,l,o.clientConnectionPolicy)}catch(t){}}return u(y,n,o)})}})(t,k,w,h,C);case'timeout':case'close':return u(s,k,n);default:return u(s,k,o)}})}}}),"41fe0f",["3604b7","b95f3e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeLoader=e.getDefaultExport=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),l=babelHelpers.interopRequireDefault(r(d[1]));const o=t.default;e.getDefaultExport=o;const u=l.default;e.normalizeLoader=u}),"4b299b",["91fe65","8ce522"]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(){const s=babelHelpers.interopRequireDefault(r(d[0]));return n=function(){return s},s}Object.defineProperty(e,"__esModule",{value:!0}),e.asyncChunksContextTypes=void 0,e.collectAsyncChunks=function(n,s){null==s||s.asyncChunks},e.pushAsyncChunks=void 0;const s={asyncChunks:n().default.instanceOf(Set),staticAsyncChunks:n().default.instanceOf(Set)};e.asyncChunksContextTypes=s;e.pushAsyncChunks=(n,s)=>{}}),"4b7bbf",["590f40"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClientDisconnectionEvent=void 0;var n={defaultProps:{schema:'com.airbnb.jitney.event.logging.WebSocketClient:WebSocketClientDisconnectionEvent:1.0.0',event_name:'websocketclient_disconnection'},propTypes:{}};e.WebSocketClientDisconnectionEvent=n,n.fullyQualifiedName='WebSocketClient.v1.WebSocketClientDisconnectionEvent'}),"4bbf42",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertCustomRouteConfig=function t(n,o=""){return n.map(n=>{let s;return s='function'==typeof n.path?u(n.path(o)):u(`${o}${u(n.path)}`),{path:s,component:n.component,exact:n.exact,key:n.key,routes:n.routes?t(n.routes,s):[],header:n.header,footer:n.footer,options:n.options}})},e.generateAsyncRouteComponent=function({loader:u,Placeholder:l=null,preloadAdditionalAsyncChunks:p=[]}){let c=null;class h extends t.default.Component{constructor(t,o){super(t,o),this.state=void 0,this.mounted=!0,p&&p.length>0&&(0,n.pushAsyncChunks)(p,o),(0,n.collectAsyncChunks)(u,o),this.updateState=this.updateState.bind(this),this.state={Component:c||u.value||null}}static load(){return u().then(t=>(c=(0,o.getDefaultExport)(t),c))}static getChunkNames(){if(null===c)throw new ReferenceError('Component must be preloaded before we can access the chunk name.');return[u().chunkName,...p]}UNSAFE_componentWillMount(){this.mounted=!0,h.load().then(this.updateState)}UNSAFE_componentWillUnmount(){this.mounted=!1}updateState(){let t={};c&&this.state.Component!==c&&(t={...t,Component:c}),Object.keys(t).length>0&&this.mounted&&this.setState(t)}render(){const{Component:t}=this.state;return t?(0,s.jsx)(t,{...this.props}):l?(0,s.jsx)(l,{...this.props}):null}}return h.Placeholder=l,h.contextTypes={...n.asyncChunksContextTypes},h};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]),o=r(d[2]),s=(babelHelpers.interopRequireDefault(r(d[3])),babelHelpers.interopRequireDefault(r(d[4])),r(d[5]));function u(t=""){let n=t.replace('//','/');return n.startsWith('/')||(n="/"+n),n}}),"4d6e6f",["d7ed8e","4b7bbf","4b299b","e3e714","40ae24","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({isDev:n,hyperloopEnv:t}){if(n&&'false'!==n)return'development';if(!t)return null;const l=t.match(/-(\w+|shared-development)(-[0-9]+)?$/);let u;if(!l)return null;u=l[1];return u},e.getHyperloopName=function(n){if(!n)return null;const t=n.match(/^(\w|-)+?loop/);if(!t)return null;return t[0]}}),"553d67",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBrowserMetricReporter=function(o){const t=null===o.tier?'':o.tier,u=null===o.loop?'':o.loop,c=null===o.kube_namespace?'':o.kube_namespace,l={environment:'browser',tier:t,loop:u,kube_namespace:c},s=window.performance.now.bind(window.performance);return{histogram:(o,t,u)=>{!(function(...o){Math.random()<=.002&&(0,n.airdogDistribution)(...o)})(o,t,{rateLimit:"0.002",...l,...u})},increment:(o,t,u)=>{(0,n.airdogCount)(o,t,{...l,...u})},now:s}};var n=r(d[0])}),"5a6afa",["08b665"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.withGraphql=function({prepare:v,extraProps:f}={}){return P=>{var C;function h(n,o){const t=(0,l().useNiobeClients)({context:o}),C=(0,u().usePrepare)({prepareLoader:v,context:o}),{match:b,location:x}=n,y=(0,c().usePrepareProps)({niobeClients:t,prepare:C,preparePropsCacheKey:h,location:x,extraProps:f,match:b});if(null===t||null===C){var N;null===(N=P.load)||void 0===N||N.call(P);const{Placeholder:o}=P;return o?(0,p.jsx)(o,{...n}):null}return void 0!==C&&null===y?null:(0,p.jsx)(s().NiobeClientReactContext.Provider,{value:t,children:(0,p.jsx)(P,{...n,...y})})}return h.load=async function(){const n=h.loadComponent(),o=h.loadPrepare(),t=await h.loadClientConstructors(),[l]=await Promise.all([n,o,...t]);return l},h.loadClientConstructors=function(){return(0,l().loadNiobeClientConstructors)()},h.loadComponent=async function(){var n,o,t;const[l,u]=await Promise.all([null===(n=P.loadComponent)||void 0===n?void 0:n.call(P),null===(o=P.load)||void 0===o?void 0:o.call(P)]);return null!==(t=null!=l?l:u)&&void 0!==t?t:()=>null},h.loadPrepare=async function(){var n,o;const[t,l]=await Promise.all([null==v?void 0:v().then(n=>(v.value=n,n)),null===(n=P.loadPrepare)||void 0===n?void 0:n.call(P)]);return null!==(o=null!=t?t:l)&&void 0!==o?o:()=>({})},h.prepareNiobe=function(n){var o,l;v&&!v.value&&(0,t().throwNiobeError)((0,t().unexpectedlyUnloadedPrepareLoader)());const u=null!==(o=null==v||null===(l=v.value)||void 0===l?void 0:l.call(v,{...n,...f}))&&void 0!==o?o:{};return Promise.resolve(u).then(o=>{n.requestPreparePropsCache&&n.requestPreparePropsCache.set(h,o)}),u},h.displayName=`withGraphql(${null!==(C=P.displayName)&&void 0!==C?C:P.name})`,h.InnerComponent=P,h.contextTypes={...o.asyncChunksContextTypes},(0,n.default)(h,P,{load:!0,loadPrepare:!0,loadComponent:!0,prepareNiobe:!0})}};babelHelpers.interopRequireDefault(r(d[0]));var n=babelHelpers.interopRequireDefault(r(d[1])),o=r(d[2]);function t(){const n=r(d[3]);return t=function(){return n},n}function l(){const n=r(d[4]);return l=function(){return n},n}function u(){const n=r(d[5]);return u=function(){return n},n}function c(){const n=r(d[6]);return c=function(){return n},n}function s(){const n=r(d[7]);return s=function(){return n},n}var p=r(d[8])}),"5b5d75",["d7ed8e","0c74c7","4b7bbf","941d44","c8a8e0","b7ded4","ad02bf","8915ba","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMinimalistClientConstructor=void 0,e.useMinimalistClient=function({context:v}={}){var b;(0,n.collectAsyncChunks)(c().niobeMinimalistClientLoader,v);const{niobeMinimalistClient:M}=(0,t.useContext)(l.HyperloopProvidedContext),{niobeMinimalClientData:p}=(0,t.useContext)(o.HyperloopPropsContext),{niobeMinimalistClient:x}=null!==(b=(0,t.useContext)(u().NiobeClientReactContext))&&void 0!==b?b:{},[D,y]=(0,t.useState)(()=>{var t,n;return null!==(t=null!=M?M:x)&&void 0!==t?t:f.value&&(0,C().default)(f.value,null!=p?p:null===(n=(0,s().getState)())||void 0===n?void 0:n.niobeMinimalClientData)});return(0,t.useEffect)(()=>{let t=!0;return D||f().then(n=>{var l;t&&y((0,C().default)(n,null!=p?p:null===(l=(0,s().getState)())||void 0===l?void 0:l.niobeMinimalClientData))}),()=>{t=!1}},[]),(0,t.useEffect)(()=>{x||D&&(0,s().getDeferredState)().then(t=>{null!=t&&t.niobeMinimalClientData&&D.updateCache(null==t?void 0:t.niobeMinimalClientData)})},[D]),D};var t=r(d[0]),n=r(d[1]),l=r(d[2]),o=r(d[3]);function u(){const t=r(d[4]);return u=function(){return t},t}function s(){const t=r(d[5]);return s=function(){return t},t}function c(){const t=r(d[6]);return c=function(){return t},t}function C(){const t=babelHelpers.interopRequireDefault(r(d[7]));return C=function(){return t},t}const f=async()=>{const t=await(0,c().niobeMinimalistClientLoader)();return f.value=t,t};e.getMinimalistClientConstructor=f}),"6fd41b",["d7ed8e","4b7bbf","a9b978","f1bcbf","8915ba","c8a8e0","352233","b775eb"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return n(t)};const n=(o,u=[],c=new Set)=>new Proxy(o,{get(o,s){const f=Reflect.get(o,s),l=[...u,Array.isArray(o)?'[]':s],y=l.join('.');return null===f||'object'!=typeof f?(c.has(y)||(c.add(y),(0,t().postNiobeDataMessage)({key:y})),f):n(f,l,c)}})}),"6ffae5",["9653c9"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){return[...(function(){const t=window.crypto||window.msCrypto;return t?t.getRandomValues.bind(t):()=>[]})()(new Uint32Array(4))].map(t=>t.toString(36).padStart(7,'0')).join('')}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.generateRandomString=t;var n=t;e.default=n}),"73016f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NiobeClientReactContext=void 0;const t=(0,r(d[0]).createContext)(null);e.NiobeClientReactContext=t,t.displayName='NiobeClientReactContext'}),"8915ba",["d7ed8e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSharedPrepareOptions=function(){const{cookie:b,requestDomain:h,hostname:v}=(function(){var n,u;const{cookies:l,requestDomain:s,hostname:c}=(0,t.useContext)(f.HyperloopProvidedContext);return{cookie:t=>(0,o.default)(t)||null,requestDomain:null===(n=window.location)||void 0===n?void 0:n.hostname,hostname:null===(u=window.location)||void 0===u?void 0:u.hostname}})(),D=n.default.get('cdn_experiments'),P=n.default.get('exploreTreatments'),q=n.default.get('customPrepareNiobeData'),C=n.default.get('initialPageCDNCached'),x=String(s.default.current().id||''),R=(0,t.useContext)(c.TrebuchetClientContext);return{requestDomain:h,hostname:v,getRenderingState:p().getRenderingState,cookie:b,exploreTreatments:P,customPrepareNiobeData:q,currentUserId:x,isPrefetch:!1,getTrebuchets:t=>t.map(t=>R&&R(t)),getErf:t=>{var n;const o=null!==(n=D[t])&&void 0!==n?n:l.default.findTreatmentAndLog(t);return Promise.resolve(o)},logJitneyEvent:u.default.logJitneyEvent.bind(u.default),requestPreparePropsCache:null,initialPageCDNCached:C}};var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1])),o=babelHelpers.interopRequireDefault(r(d[2])),u=babelHelpers.interopRequireDefault(r(d[3])),l=babelHelpers.interopRequireDefault(r(d[4])),s=babelHelpers.interopRequireDefault(r(d[5])),c=r(d[6]),f=r(d[7]);function p(){const t=r(d[8]);return p=function(){return t},t}}),"8ab9d3",["d7ed8e","05b07c","e480b8","4cdbd9","52d64b","c1939d","9d5402","a9b978","9ef65f"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){return()=>{const u=n();return Object.assign(u.then(t.default),u)}};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"8ce522",["91fe65"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNiobeBroadcastChannel=function(n){if(n)return new n("niobe-fetch-status");if('undefined'!=typeof globalThis&&'function'==typeof globalThis.BroadcastChannel){const{BroadcastChannel:n}=globalThis;return new n("niobe-fetch-status")}return}}),"90a711",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(function(t){return t&&!(null==t||!t.default)})(t)?t.default:t}}),"91fe65",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STREAM_CLOSED_EVENT=void 0;e.STREAM_CLOSED_EVENT={type:'close',code:-3,wasClean:!0,reason:'Stream closed client-side'}}),"93888a",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(p){var R;const _=new URLSearchParams(p.location.search),b='true'===_.get('niobe_skip_prepare'),S='true'===_.get('niobe_data_wrapper'),v=_.get('niobe_test_destinations'),E={...(0,f().default)()};v&&(E[c().KRAKEN_TEST_DESTINATIONS_HEADER]=v);const H=(0,s().getBrowserHyperloopEnv)(),D=(0,o().createBrowserMetricReporter)(H),h=t.default.logJitneyEvent.bind(t.default),{performance:w}=p,y=null==w||null===(R=w.memory)||void 0===R?void 0:R.jsHeapSizeLimit,T=y&&y/4,j=S?l().default:void 0;return{fetch:fetch,getRenderingState:u().getRenderingState,disablePrepare:b,wrapResultData:j,extraHeaders:E,metricReporter:D,jitneyLogger:h,performance:w,cacheMaxSize:T,generateRandomString:n.generateRandomString}};var t=babelHelpers.interopRequireDefault(r(d[0])),n=r(d[1]);function o(){const t=r(d[2]);return o=function(){return t},t}function u(){const t=r(d[3]);return u=function(){return t},t}function c(){const t=r(d[4]);return c=function(){return t},t}function f(){const t=babelHelpers.interopRequireDefault(r(d[5]));return f=function(){return t},t}function s(){const t=r(d[6]);return s=function(){return t},t}function l(){const t=babelHelpers.interopRequireDefault(r(d[7]));return l=function(){return t},t}}),"93f7b2",["4cdbd9","73016f","5a6afa","9ef65f","2152b5","ed3571","c8dac5","6ffae5"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buggyApolloCacheFragmentSelectionsWrite=function(n){return t('NIOBE41')},e.invalidNiobeClientType=function(n){return t(`NIOBE04 [${n}]`)},e.invalidNormalizationPatch=function(){return t('NIOBE42')},e.invalidQueryRefError=function(n){return t('NIOBE11')},e.minimalistOperationGivenToApolloClient=function(n){return t(`NIOBE51 [${n}]`)},e.mismatchingNiobeClientType=function(n,o){return t(`NIOBE05 [${n} ${o}]`)},e.mismatchingQueryRef=function(n,o){return t('NIOBE13')},e.missingSerializedNiobeCache=function(){return t('NIOBE31')},e.niobeClientNotFoundFromContext=function(n){return t(`NIOBE01 [${n}]`)},e.noMatchingQueryRef=function(n){return t('NIOBE12')},e.receivedQueryRefForWrongClient=function({type:n},{type:o}){return t(`NIOBE03 [${n} ${o}]`)},e.reportNiobeError=o,e.ssrTimeoutError=function(n,o){return t(`NIOBE52 [${n}]`)},e.throwNiobeError=function(n){throw n},e.unexpectedlyLoadingObservable=function(n){return t('NIOBE29')},e.unexpectedlyUnloadedPrepareLoader=function(){return t('NIOBE21')},e.unparseableSubscriptionMessage=function(n){return t(`NIOBE71 [${n}]`)},e.warnNiobeError=function(n,t){o(n,t)};var n=r(d[0]);function t(t){return new n.PineappleError(t,{fingerprint:['niobe']})}function o(t,o){(0,n.reportError)(t,o)}}),"941d44",["5511db"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postNiobeDataMessage=void 0;e.postNiobeDataMessage=o=>{window&&window.postMessage({name:"x-ray-niobe-data",key:o.key},'*')}}),"9653c9",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=(0,babelHelpers.interopRequireDefault(r(d[0])).default)(()=>r(d[2])(d[1],"./HeaderQuery.prepare").then(babelHelpers.interopRequireWildcard));e.default=t}),"998a83",["8ce522","2ca45a","b8ad06"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAppShell=function(){return!0===t.default.get('isAppShell')};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"99bf85",["05b07c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrebuchetClientContext=void 0;const t=(0,r(d[0]).createContext)(void 0);e.TrebuchetClientContext=t,t.displayName='TrebuchetClientContext'}),"9d5402",["d7ed8e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRenderingState=function(){if(!(0,t.hasClientHydrateCompleted)())return'client-hydration';return'client-render'};var t=r(d[0])}),"9ef65f",["8e78f2"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}function c(){const t=r(d[3]);return c=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.TIMEOUT_ERROR_CODE=void 0,e.observeConnection=async function(s,_,l,u){const f=s.now();s.increment('frontend.websocket_client.connecting',1,{}),_({schema:t().WebSocketClientConnectionAttemptEvent,event_data:{connection_id:u,retry_attempt_number:0,websocket_url:l.webSocketUrl.toString(),message_offset:void 0}});const b=await l.next,w='disconnected'===b.state?b:await b.next;if('disconnected'===w.state){const{webSocketUrl:t,attemptCount:o,sourceError:{wasClean:c,code:l,reason:b}}=w,S={clean:String(c),code:String(l),reason:b};-2===l?s.increment('frontend.websocket_client.connect_timeout',1,S):s.increment('frontend.websocket_client.closed',1,S),_({schema:n().WebSocketClientConnectionResultEvent,event_data:{is_successful:!1,will_retry:!1,websocket_url:t.toString(),retry_attempt_number:o,connection_id:u,connect_time_ms:String(f-s.now()),error_code:String(l),error_reason:b}})}else if('established'===w.state){s.increment('frontend.websocket_client.connected',1,{});const{attemptCount:t,webSocketUrl:l}=w;return _({schema:n().WebSocketClientConnectionResultEvent,event_data:{is_successful:!0,will_retry:!1,websocket_url:l.toString(),retry_attempt_number:t,connection_id:u,connect_time_ms:String(f-s.now())}}),w.next.then((function t(n){if('disconnected'===n.state){const{sourceError:{wasClean:t,code:o,reason:l}}=n;return s.increment('frontend.websocket_client.closed',1,{clean:String(t),code:String(o),reason:l}),void _({schema:c().WebSocketClientDisconnectionEvent,event_data:{connection_id:u,is_normal_close:t,websocket_url:n.webSocketUrl.toString(),will_retry:!1,error_code:String(o),error_reason:l,last_message_offset:n.messageOffset}})}if('reconnecting'===n.state){const{sourceError:{wasClean:o,code:c,reason:_}}=n;return s.increment('frontend.websocket_client.retrying',1,{clean:String(o),code:String(c),reason:_}),n.next.then(n=>{if('established'===n.state)return n.next.then(t)})}if('message'===n.state){const{lastMessage:c,webSocketUrl:l,payloadSize:f}=n;return c&&(s.increment('frontend.websocket_client.message',1,{}),'channelId'in c&&_({schema:o().WebSocketClientMessageEvent,event_data:{channel_id:c.channelId,connection_id:u,message_offset:c.messageOffset,message_size_bytes:f||0,websocket_url:l.toString()}})),n.next.then(t)}}))}};e.TIMEOUT_ERROR_CODE=-2}),"a0281a",["f6844c","31fe9f","2f1f8d","4bbf42"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HyperloopProvidedContext=void 0;var o=babelHelpers.interopRequireWildcard(r(d[0]));r(d[1]);const t=(0,o.createContext)({});e.HyperloopProvidedContext=t}),"a9b978",["d7ed8e","721ed1"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.usePrepareProps=function({niobeClients:o,prepare:s,match:c,location:l,extraProps:p,preparePropsCacheKey:f}){const{requestPreparePropsCache:P}=(0,n.useContext)(t.HyperloopProvidedContext),v=(0,n.useRef)(null),h=(0,n.useRef)(null),C=(0,u().useSharedPrepareOptions)(),R=(0,n.useRef)(l),_=(0,n.useRef)(c);_.current=c,R.current=l;const x=(0,n.useMemo)(()=>{var n,t;return o&&s?null!==(n=null!==(t=null==P?void 0:P.get(f))&&void 0!==t?t:null==s?void 0:s({...C,match:_.current,location:R.current,previousPrepareProps:v.current,previousLocation:h.current,...o,...p}))&&void 0!==n?n:{}:null},[p,o,s,f,P,C]),y=x instanceof Promise?null:x,[b,M]=(0,n.useState)(null),O=null!=y?y:b;return v.current=O,h.current=l,(0,n.useEffect)(()=>{let n=!0;return x instanceof Promise&&x.then(t=>{n&&M(t)}),()=>{n=!1}},[c,l]),O};var n=r(d[0]),t=r(d[1]);function u(){const n=r(d[2]);return u=function(){return n},n}}),"ad02bf",["d7ed8e","a9b978","8ab9d3"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u,w){const f=(0,c().default)(window),s=(0,o().createNiobeBroadcastChannel)(),l=(0,t.getWebSocketGatewayURL)(window.location);return new u({data:w,fetchStatusMessageTarget:s,webSocketClient:l?new(n().WebSocketClient)({WebSocket:window.WebSocket,onlineIndicator:window,wsGatewayURL:l,metricReporter:f.metricReporter,jitneyLogger:f.jitneyLogger}):void 0,...f})};var t=r(d[0]);function n(){const t=r(d[1]);return n=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}function c(){const t=babelHelpers.interopRequireDefault(r(d[3]));return c=function(){return t},t}}),"b775eb",["26daec","e3c75b","90a711","93f7b2"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.usePrepare=function({prepareLoader:n,context:l}){n&&(0,u.collectAsyncChunks)(n,l);const[c,o]=(0,t.useState)(()=>null==n?void 0:n.value);return(0,t.useEffect)(()=>{let t=!0;return n&&!c&&n().then(u=>{n.value=u,t&&o(()=>u)}),()=>{t=!1}},[]),n?c||null:void 0};var t=r(d[0]),u=r(d[1])}),"b7ded4",["d7ed8e","4b7bbf"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.createWebSocketEventGetter=function(n,o,s,c){const l=new s(n,o),u=(function(t){let n=!1;return new ReadableStream({start(o){const s=()=>o.enqueue({type:'open'}),c=({data:t})=>{const n=JSON.parse(t);o.enqueue({type:'message',data:n})};t.addEventListener('open',s,{once:!0}),t.addEventListener('message',c),t.addEventListener('close',(function l({code:u,reason:v,wasClean:E}){n||(o.enqueue({type:'close',code:u,reason:v,wasClean:E}),o.close()),t.removeEventListener('open',s),t.removeEventListener('message',c),t.removeEventListener('close',l)}),{once:!0})},cancel(){var o;n=!0,null===(o=t.close)||void 0===o||o.call(t)}})})(l).getReader(),v=(function(t){return new WritableStream({write(n){t.send(JSON.stringify(n))}})})(l).getWriter(),E=()=>{u.cancel(),v.close()};c.aborted&&E();c.addEventListener('abort',E,{once:!0}),u.closed.then(()=>{c.removeEventListener('abort',E)});let b=null;return{getNextWebSocketEvent:async()=>{const{value:n}=await u.read();return'close'===(null==n?void 0:n.type)&&(b=n),n||b||t().STREAM_CLOSED_EVENT},writeWebSocketEvent:t=>{v.write(t)}}}}),"b95f3e",["93888a"]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(n){throw new Error('Impossible condition')}function t(t,u){return{state:'established',connection:t,channelId:u,next:t.next.then((function t(l){return'reconnecting'===l.state?c(l,u):'disconnected'===l.state?s(l,u):'message'===l.state?l.lastMessage.channelId===u?o(l,u):l.next.then(t):void n()}))}}function s(n,t){return{state:'disconnected',connection:n,channelId:t,next:null,sourceError:n.sourceError}}function c(c,o){return{state:'reconnecting',connection:c,channelId:o,next:c.next.then((function c(u){return'established'===u.state?t(u,o):'disconnected'===u.state?s(u,o):'reconnecting'===u.state?u.next.then(c):void n()}))}}function o(t,u){const{lastMessage:l}=t;return{state:'message',connection:t,channelId:u,next:t.next.then((function t(l){return'reconnecting'===l.state?c(l,u):'disconnected'===l.state?s(l,u):'message'===l.state?l.lastMessage.channelId===u?o(l,u):l.next.then(t):void n()})),message:l.payload}}Object.defineProperty(e,"__esModule",{value:!0}),e.createWebSocketSubscription=function(u,l){if('pending-open'===u.state||'pending-config'===u.state)return{state:'pending',connection:u,channelId:l,next:u.next.then((function n(c){return'established'===c.state?t(c,l):'disconnected'===c.state?s(c,l):c.next.then(n)}))};if('established'===u.state)return t(u,l);if('reconnecting'===u.state)return c(u,l);if('message'===u.state){const{lastMessage:n}=u;return n.channelId===l?o(u,l):t(u,l)}n(u)}}),"c44261",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getState=e.getDeferredState=void 0,e.loadNiobeClientConstructors=async function(){var n;const t=f().getMinimalistClientConstructor,l=p().getApolloClientConstructor;let o=[];const u=null!==(n=await(0,C.default)('state'))&&void 0!==n?n:{},{loadSingleClient:s,niobeClientIsMinimalist:c}=u;o=s&&c?[t]:[t,l];return o.map(n=>n())},e.useNiobeClients=function({context:t,onlyMinimalist:l}){var s,C,c,b,v,A,I,h;const{niobeClientIsMinimalist:x,loadSingleClient:D}=(0,n.useContext)(u.HyperloopProvidedContext),{niobeClientIsMinimalist:y,loadSingleClient:H}=(0,n.useContext)(o.HyperloopPropsContext),N=null!==(s=null!==(C=null!==(c=null!=l?l:x)&&void 0!==c?c:y)&&void 0!==C?C:null===(b=M())||void 0===b?void 0:b.niobeClientIsMinimalist)&&void 0!==s&&s,O=null!==(v=null!==(A=null!==(I=null!=l?l:D)&&void 0!==I?I:H)&&void 0!==A?A:null===(h=M())||void 0===h?void 0:h.loadSingleClient)&&void 0!==v&&v,{shouldLoadApolloClient:P}=(function({loadSingleClient:n,niobeClientIsMinimalist:t}){const l=n&&!t||!n;return{shouldCreateMinimalistClient:!0,shouldCreateApolloClient:l,shouldLoadApolloClient:l}})({loadSingleClient:O,niobeClientIsMinimalist:N}),R={niobeMinimalistClient:(0,f().useMinimalistClient)({context:t}),niobeApolloClient:(0,p().useNiobeApolloClient)({context:t,skip:!P})},_={...S({...R,niobeClientIsMinimalist:N}),...R};return(function(n){return Boolean(n.niobeClient&&n.niobeMinimalistClient)})(_)?_:null};var n=r(d[0]),t=babelHelpers.interopRequireDefault(r(d[1])),l=babelHelpers.interopRequireDefault(r(d[2])),o=r(d[3]),u=r(d[4]),s=r(d[5]),C=babelHelpers.interopRequireDefault(r(d[6]));function c(){const n=r(d[7]);return c=function(){return n},n}function b(){const n=r(d[8]);return b=function(){return n},n}function p(){const n=r(d[9]);return p=function(){return n},n}function f(){const n=r(d[10]);return f=function(){return n},n}const v=()=>{var n;return null!==(n=v.promise)&&void 0!==n||(v.promise=(0,C.default)('deferred-state')),v.promise};e.getDeferredState=v;const M=()=>{{if(M.value)return M.value;const n=(0,l.default)('state')||{};return'client-hydration'!==(0,c().getRenderingState)()||null!=n&&n.niobeApolloClientData&&null!=n&&n.niobeMinimalClientData||(0,s.isAppShell)()||t.default.get('isOmni')||'true'===process.env.HAPPO||'STORYBOOK_ENV'in window||(0,b().warnNiobeError)((0,b().missingSerializedNiobeCache)()),M.value=n,n}};function S({niobeClientIsMinimalist:n,niobeMinimalistClient:t,niobeApolloClient:l}){return{niobeClient:n?null!=t?t:l:null!=l?l:t,niobeMinimalistClient:t}}e.getState=M}),"c8a8e0",["d7ed8e","05b07c","f1ceb7","f1bcbf","a9b978","99bf85","e161ed","9ef65f","941d44","1638e7","6fd41b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBrowserHyperloopEnv=function(){const p=t.default.get('HYPERLOOP_ENV');return{loop:(0,o.getHyperloopName)(p),tier:(0,o.default)({isDev:l.IS_DEV,hyperloopEnv:p}),kube_namespace:p}};var t=babelHelpers.interopRequireDefault(r(d[0])),o=babelHelpers.interopRequireWildcard(r(d[1])),l=r(d[2])}),"c8dac5",["05b07c","553d67","4cef2c"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClient=void 0;var n=babelHelpers.interopRequireDefault(r(d[1]));function o(){const t=r(d[2]);return o=function(){return t},t}function c(){const t=r(d[3]);return c=function(){return t},t}function s(){const t=r(d[4]);return s=function(){return t},t}const u=['starfish-1.0.0'];function l(){return new Promise(t=>{setTimeout(()=>t({type:'timeout',wasClean:!1,code:c().TIMEOUT_ERROR_CODE,reason:'WebSocket connection timed out'}),5e3)})}function h(t,o,c){if(!1===c.navigator.onLine)return new Promise(t=>{c.addEventListener('online',()=>{t()})});const{clientRetryStrategy:s}=t,u=(function(t,o){const{waitStrategy:c,retryDelayMs:s,waitIntervalMs:u}=t;return'NO_WAIT'===c?0:o<=1?s:'FIXED_INTERVAL'===c?u:'EXPONENTIAL_BACKOFF'===c?u*2**(o-1):(0,n.default)(c,0)})(s,o);return u>0?new Promise(t=>{setTimeout(()=>{t()},u)}):Promise.resolve()}e.WebSocketClient=class{constructor({WebSocket:n,onlineIndicator:o,metricReporter:c,jitneyLogger:s,wsGatewayURL:u,defaultCloseConfig:l={reconnectable:!0,clientRetryStrategy:{maxRetryAttempts:20,retryDelayMs:100,useRandomDelay:!1,waitIntervalMs:0,waitStrategy:'EXPONENTIAL_BACKOFF'}}}){this.WebSocket=void 0,this.onlineIndicator=void 0,this.metricReporter=void 0,this.jitneyLogger=void 0,this.generateConnectionId=void 0,this.wsGatewayURL=void 0,this.defaultCloseConfig=void 0,this.connection=void 0,this.connectionAbortSignal=void 0,this.WebSocket=n,this.onlineIndicator=o,this.generateConnectionId=t().v4,this.metricReporter=c,this.jitneyLogger=s,this.wsGatewayURL=u,this.defaultCloseConfig=l,this.metricReporter.increment('frontend.websocket_client.construct',1,{})}connect(t){var n;if(this.connection&&'disconnected'!==this.connection.state&&(null===(n=this.connectionAbortSignal)||void 0===n||!n.aborted))return this.connection;const{WebSocket:s,wsGatewayURL:f,metricReporter:b,jitneyLogger:y,defaultCloseConfig:v}=this,w=this.generateConnectionId(),C=(0,o().createPendingOpenWebSocketConnection)({abortSignal:t,webSocketGatewayURL:f,protocols:u,connectionId:w,createTimeoutPromise:l,createRetryPromise:(t,n)=>h(t,n,this.onlineIndicator),WebSocket:s,defaultCloseConfig:v});this.connection=C,this.connectionAbortSignal=t;const R=async t=>{this.connection=t,this.connection.next&&await R(await this.connection.next)};return R(this.connection),(0,c().observeConnection)(b,y,C,w),this.connection}subscribe(t,n){const o=this.connect(n);return(0,s().createWebSocketSubscription)(o,t)}}}),"e3c75b",["f2cf32","2f14a2","41fe0f","a0281a","c44261"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return{"X-Airbnb-Supports-Airlock-V2":'true'}}}),"ed3571",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HyperloopPropsContext=void 0;const o=(0,r(d[0]).createContext)({});e.HyperloopPropsContext=o}),"f1bcbf",["d7ed8e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketClientConnectionAttemptEvent=void 0;var t={defaultProps:{schema:'com.airbnb.jitney.event.logging.WebSocketClient:WebSocketClientConnectionAttemptEvent:1.0.0',event_name:'websocketclient_connection_attempt'},propTypes:{}};e.WebSocketClientConnectionAttemptEvent=t,t.fullyQualifiedName='WebSocketClient.v1.WebSocketClientConnectionAttemptEvent'}),"f6844c",[]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/3eff.358885d0ae.js.map